# ProxyGate ‚Äî –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è VPN/Proxy –¥–æ—Å—Ç—É–ø–æ–º
## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è v2 (–¥–ª—è Claude Code)

---

## 1. –û–ë–ó–û–† –ü–†–û–ï–ö–¢–ê

### –ß—Ç–æ —ç—Ç–æ
–í–µ–±-–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è VPN –∏ Proxy –¥–æ—Å—Ç—É–ø–æ–º –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏–∑ –†–æ—Å—Å–∏–∏ –∫ –µ–≤—Ä–æ–ø–µ–π—Å–∫–∏–º —Å–µ—Ä–≤–∏—Å–∞–º. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —É–ø—Ä–∞–≤–ª—è–µ—Ç –∫–ª–∏–µ–Ω—Ç–∞–º–∏, —É –∫–∞–∂–¥–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞ ‚Äî —Å–≤–æ–π –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ –¥–æ–º–µ–Ω–æ–≤, —á–µ—Ä–µ–∑ –∫–æ—Ç–æ—Ä—ã–µ –∏–¥—ë—Ç —Ç—Ä–∞—Ñ–∏–∫. –û—Å—Ç–∞–ª—å–Ω–æ–π —Ç—Ä–∞—Ñ–∏–∫ –∫–ª–∏–µ–Ω—Ç–∞ –∏–¥—ë—Ç –Ω–∞–ø—Ä—è–º—É—é (split tunneling).

### –ö–ª—é—á–µ–≤—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- **–í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π VPN**: IKEv2/IPsec ‚Äî –≤—Å—Ç—Ä–æ–µ–Ω –≤ Windows 10/11, iOS, macOS (–±–µ–∑ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–æ—Ñ—Ç–∞)
- **–°–µ–ª–µ–∫—Ç–∏–≤–Ω—ã–π —Ä–æ—É—Ç–∏–Ω–≥**: —Ç–æ–ª—å–∫–æ —É–∫–∞–∑–∞–Ω–Ω—ã–µ –¥–æ–º–µ–Ω—ã –∏–¥—É—Ç —á–µ—Ä–µ–∑ VPS, –æ—Å—Ç–∞–ª—å–Ω–æ–µ ‚Äî –Ω–∞–ø—Ä—è–º—É—é
- **Per-client —Å–ø–∏—Å–∫–∏**: —É –∫–∞–∂–¥–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞ —Å–≤–æ–π –Ω–∞–±–æ—Ä –¥–æ–º–µ–Ω–æ–≤ ‚Üí —Å–≤–æ–∏ –º–∞—Ä—à—Ä—É—Ç—ã
- **–ú–æ–±–∏–ª—å–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª–∏**: .mobileconfig (iOS/macOS), PowerShell-—Å–∫—Ä–∏–ø—Ç (Windows), .sswan (Android)
- **–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –∫–ª–∏–µ–Ω—Ç–∞**: –∫–ª–∏–µ–Ω—Ç –ª–æ–≥–∏–Ω–∏—Ç—Å—è ‚Üí –≤–∏–¥–∏—Ç —Å–≤–æ–π —Å—Ç–∞—Ç—É—Å, —Å–∫–∞—á–∏–≤–∞–µ—Ç –ø—Ä–æ—Ñ–∏–ª–∏, –≤–∏–¥–∏—Ç –¥–æ–º–µ–Ω—ã
- **–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å**: —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞–º–∏, –¥–æ–º–µ–Ω–∞–º–∏, –æ–ø–ª–∞—Ç–æ–π, —Å—Ç–∞—Ç—É—Å–∞–º–∏
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –æ—Ç 5 –¥–æ 200+ –∫–ª–∏–µ–Ω—Ç–æ–≤

### –î–≤–∞ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

**1. –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å** (`/admin/...`)
- –ü–æ–ª–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: —Å–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤, –¥–æ–º–µ–Ω—ã, –ø–ª–∞—Ç–µ–∂–∏, —à–∞–±–ª–æ–Ω—ã
- JWT –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è + –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π TOTP
- –¢–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

**2. –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –∫–ª–∏–µ–Ω—Ç–∞** (`/my/...`)
- –ö–ª–∏–µ–Ω—Ç –ª–æ–≥–∏–Ω–∏—Ç—Å—è –ø–æ —Å–≤–æ–µ–º—É username + password (—Ç–æ—Ç –∂–µ —á—Ç–æ –¥–ª—è VPN)
- –°–∫–∞—á–∏–≤–∞–µ—Ç –ø—Ä–æ—Ñ–∏–ª–∏ –¥–ª—è –≤—Å–µ—Ö —Å–≤–æ–∏—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- –í–∏–¥–∏—Ç —Å–≤–æ–π —Å–ø–∏—Å–æ–∫ —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤/—Å–∞–π—Ç–æ–≤
- –í–∏–¥–∏—Ç —Å—Ç–∞—Ç—É—Å –ø–æ–¥–ø–∏—Å–∫–∏ –∏ –∏—Å—Ç–æ—Ä–∏—é –ø–ª–∞—Ç–µ–∂–µ–π
- –ú–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –Ω–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ–º–µ–Ω–æ–≤
- –ú–æ–∂–µ—Ç —Å–∞–º —Å–±—Ä–æ—Å–∏—Ç—å –ø–∞—Ä–æ–ª—å VPN/Proxy

### –ü–æ—á–µ–º—É IKEv2/IPsec
| –°–≤–æ–π—Å—Ç–≤–æ | IKEv2 | WireGuard |
|----------|-------|-----------|
| –í—Å—Ç—Ä–æ–µ–Ω –≤ Windows | ‚úÖ –î–∞, –Ω–∞—Ç–∏–≤–Ω–æ | ‚ùå –ù—É–∂–µ–Ω –∫–ª–∏–µ–Ω—Ç |
| –í—Å—Ç—Ä–æ–µ–Ω –≤ iOS | ‚úÖ –î–∞, –Ω–∞—Ç–∏–≤–Ω–æ | ‚ùå –ù—É–∂–µ–Ω App Store |
| –í—Å—Ç—Ä–æ–µ–Ω –≤ macOS | ‚úÖ –î–∞, –Ω–∞—Ç–∏–≤–Ω–æ | ‚ùå –ù—É–∂–µ–Ω –∫–ª–∏–µ–Ω—Ç |
| Android | strongSwan (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π) | WireGuard App |
| –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è | –õ–æ–≥–∏–Ω + –ø–∞—Ä–æ–ª—å (EAP) | –ö–ª—é—á–∏ (—Å–ª–æ–∂–Ω–µ–µ) |
| Split tunnel Windows | PowerShell –º–∞—Ä—à—Ä—É—Ç—ã | AllowedIPs |
| –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —Å–µ—Ä–≤–µ—Ä–∞ | Let's Encrypt (–±–µ—Å–ø–ª–∞—Ç–Ω–æ) | –ù–µ –Ω—É–∂–µ–Ω |
| –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ DPI | –°–ª–æ–∂–Ω–µ–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å | –õ–µ–≥–∫–æ –¥–µ—Ç–µ–∫—Ç–∏—Ç—Å—è |
| –ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ | MOBIKE (–º–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ) | Keepalive |
| –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ | AES-256 + SHA-256 | ChaCha20 |

### –î–≤–∞ —Ä–µ–∂–∏–º–∞ –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤

**–†–µ–∂–∏–º 1 ‚Äî VPN (IKEv2/IPsec, split tunnel)**
- Windows: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí VPN ‚Üí –ø–æ–¥–∫–ª—é—á–∏—Ç—å (–ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å)
- iOS/macOS: —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å .mobileconfig
- Android: strongSwan App
- –¢–æ–ª—å–∫–æ —Ç—Ä–∞—Ñ–∏–∫ –∫ —É–∫–∞–∑–∞–Ω–Ω—ã–º –¥–æ–º–µ–Ω–∞–º –∏–¥—ë—Ç —á–µ—Ä–µ–∑ VPN
- –û—Å—Ç–∞–ª—å–Ω–æ–π —Ç—Ä–∞—Ñ–∏–∫ ‚Äî –Ω–∞–ø—Ä—è–º—É—é (—ç–∫–æ–Ω–æ–º–∏—è —Å–∫–æ—Ä–æ—Å—Ç–∏)

**–†–µ–∂–∏–º 2 ‚Äî Proxy (HTTP/SOCKS5)**
- –ö–ª–∏–µ–Ω—Ç –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –ø—Ä–æ–∫—Å–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ/—Å–∏—Å—Ç–µ–º–µ
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç PAC-—Ñ–∞–π–ª (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ—Ç –∫–∞–∫–∏–µ –¥–æ–º–µ–Ω—ã —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏)
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ –ª–æ–≥–∏–Ω—É/–ø–∞—Ä–æ–ª—é

---

## 2. –°–¢–ï–ö –¢–ï–•–ù–û–õ–û–ì–ò–ô

```
–°–µ—Ä–≤–µ—Ä:         Ubuntu 24.04 LTS (OVHcloud VPS-3, –§—Ä–∞–Ω—Ü–∏—è, 6 vCPU / 12 GB / 100 GB)
VPN:            strongSwan 5.9+ (IKEv2/IPsec)
Proxy:          3proxy 0.9.x
Backend:        Python 3.12 + FastAPI + Uvicorn
ORM:            SQLAlchemy 2.0 + Alembic (–º–∏–≥—Ä–∞—Ü–∏–∏)
–ë–î:             SQLite (–Ω–∞—á–∞–ª–æ, –ª–µ–≥–∫–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ PostgreSQL)
Frontend:       React 18 + Tailwind CSS + shadcn/ui
–°–±–æ—Ä–∫–∞:         Vite
Web-—Å–µ—Ä–≤–µ—Ä:     Nginx (reverse proxy + SSL + —Ä–∞–∑–¥–∞—á–∞ PAC/–ø—Ä–æ—Ñ–∏–ª–µ–π)
SSL:            Let's Encrypt (certbot) ‚Äî —Ç–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è IKEv2
–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:    Telegram Bot API (aiogram 3)
```

---

## 3. –°–¢–†–£–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê

```
proxygate/
‚îú‚îÄ‚îÄ .env.example
‚îú‚îÄ‚îÄ README.md
‚îÇ
‚îú‚îÄ‚îÄ backend/
‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt
‚îÇ   ‚îú‚îÄ‚îÄ alembic.ini
‚îÇ   ‚îú‚îÄ‚îÄ alembic/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ versions/
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main.py                 # FastAPI app, lifespan, CORS
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config.py               # Settings from .env
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database.py             # SQLAlchemy engine, session
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ client.py           # Client model
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ domain.py           # ClientDomain, DomainTemplate
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ vpn.py              # VpnConfig model (IKEv2)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ proxy.py            # ProxyAccount model
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ payment.py          # Payment model
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ domain_request.py   # DomainRequest model (–∑–∞–ø—Ä–æ—Å—ã –∫–ª–∏–µ–Ω—Ç–æ–≤)
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ schemas/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ client.py           # Pydantic schemas
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ domain.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ vpn.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ proxy.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ payment.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ portal.py           # Schemas for client portal
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ router.py           # Main API router (admin + portal)
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ # === ADMIN API (/api/admin/...) ===
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.py             # Admin JWT auth
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ clients.py          # CRUD clients
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ domains.py          # Domain management
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ vpn.py              # VPN config generation
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ proxy.py            # Proxy account management
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ payments.py         # Payment tracking
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ profiles.py         # Platform-specific profile generation
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ templates.py        # Domain templates
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dashboard.py        # Stats & monitoring
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ # === CLIENT PORTAL API (/api/portal/...) ===
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ portal_auth.py      # Client login (username+password ‚Üí JWT)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ portal_profile.py   # Client self-service: profile downloads
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ portal_domains.py   # Client: view domains, request additions
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ portal_account.py   # Client: status, payments, password reset
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ikev2_manager.py    # strongSwan management (swanctl)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ proxy_manager.py    # 3proxy config generation & reload
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pac_generator.py    # PAC file generation per client
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ profile_generator.py # iOS .mobileconfig, Windows .ps1, Android .sswan
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ domain_resolver.py  # Resolve domains ‚Üí IPs for routes
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ route_manager.py    # Generate per-client route lists
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ payment_checker.py  # Auto-block expired clients
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ telegram_bot.py     # Telegram notifications
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ security.py         # Password hashing, JWT (admin + client tokens)
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ helpers.py
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ scripts/
‚îÇ       ‚îú‚îÄ‚îÄ init_db.py              # Create initial admin + seed templates
‚îÇ       ‚îú‚îÄ‚îÄ setup_strongswan.sh     # strongSwan initial setup
‚îÇ       ‚îú‚îÄ‚îÄ setup_3proxy.sh         # 3proxy initial setup
‚îÇ       ‚îú‚îÄ‚îÄ setup_vps.sh            # Full VPS bootstrap
‚îÇ       ‚îî‚îÄ‚îÄ cron_tasks.py           # Periodic tasks
‚îÇ
‚îú‚îÄ‚îÄ frontend/
‚îÇ   ‚îú‚îÄ‚îÄ package.json
‚îÇ   ‚îú‚îÄ‚îÄ vite.config.js
‚îÇ   ‚îú‚îÄ‚îÄ tailwind.config.js
‚îÇ   ‚îú‚îÄ‚îÄ index.html
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ src/
‚îÇ       ‚îú‚îÄ‚îÄ main.jsx
‚îÇ       ‚îú‚îÄ‚îÄ App.jsx                 # Routes: /admin/* –∏ /my/*
‚îÇ       ‚îú‚îÄ‚îÄ api.js                  # API client (fetch wrapper, –¥–≤–∞ —Ç–∏–ø–∞ JWT)
‚îÇ       ‚îÇ
‚îÇ       ‚îú‚îÄ‚îÄ # === ADMIN PANEL ===
‚îÇ       ‚îú‚îÄ‚îÄ admin/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ Layout.jsx          # Admin layout with sidebar
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ Sidebar.jsx
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ pages/
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Dashboard.jsx
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Clients.jsx
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ClientDetail.jsx
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Templates.jsx
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Settings.jsx
‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Login.jsx
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ components/
‚îÇ       ‚îÇ       ‚îú‚îÄ‚îÄ DashboardStats.jsx
‚îÇ       ‚îÇ       ‚îú‚îÄ‚îÄ ClientTable.jsx
‚îÇ       ‚îÇ       ‚îú‚îÄ‚îÄ ClientCard.jsx
‚îÇ       ‚îÇ       ‚îú‚îÄ‚îÄ DomainManager.jsx
‚îÇ       ‚îÇ       ‚îú‚îÄ‚îÄ PaymentHistory.jsx
‚îÇ       ‚îÇ       ‚îú‚îÄ‚îÄ ProfileDownload.jsx
‚îÇ       ‚îÇ       ‚îú‚îÄ‚îÄ TemplateManager.jsx
‚îÇ       ‚îÇ       ‚îî‚îÄ‚îÄ DomainRequests.jsx  # –ó–∞–ø—Ä–æ—Å—ã –æ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤ –Ω–∞ –¥–æ–º–µ–Ω—ã
‚îÇ       ‚îÇ
‚îÇ       ‚îú‚îÄ‚îÄ # === CLIENT PORTAL ===
‚îÇ       ‚îú‚îÄ‚îÄ portal/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ PortalLayout.jsx    # Portal layout (header + content)
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ pages/
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PortalLogin.jsx     # –í—Ö–æ–¥ –∫–ª–∏–µ–Ω—Ç–∞
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PortalHome.jsx      # –ì–ª–∞–≤–Ω–∞—è: —Å—Ç–∞—Ç—É—Å + –±—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PortalDevices.jsx   # –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–µ–π –¥–ª—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PortalDomains.jsx   # –ú–æ–∏ —Å–∞–π—Ç—ã + –∑–∞–ø—Ä–æ—Å –Ω–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ
‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ PortalPayments.jsx  # –ò—Å—Ç–æ—Ä–∏—è –ø–ª–∞—Ç–µ–∂–µ–π
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ components/
‚îÇ       ‚îÇ       ‚îú‚îÄ‚îÄ StatusCard.jsx      # –°—Ç–∞—Ç—É—Å –ø–æ–¥–ø–∏—Å–∫–∏
‚îÇ       ‚îÇ       ‚îú‚îÄ‚îÄ DeviceCard.jsx      # –ö–∞—Ä—Ç–æ—á–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ + –∫–Ω–æ–ø–∫–∞ —Å–∫–∞—á–∞—Ç—å
‚îÇ       ‚îÇ       ‚îú‚îÄ‚îÄ DomainList.jsx      # –°–ø–∏—Å–æ–∫ –¥–æ–º–µ–Ω–æ–≤ (read-only)
‚îÇ       ‚îÇ       ‚îú‚îÄ‚îÄ DomainRequestForm.jsx # –§–æ—Ä–º–∞ –∑–∞–ø—Ä–æ—Å–∞ –Ω–æ–≤–æ–≥–æ –¥–æ–º–µ–Ω–∞
‚îÇ       ‚îÇ       ‚îî‚îÄ‚îÄ SetupGuide.jsx      # –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
‚îÇ       ‚îÇ
‚îÇ       ‚îî‚îÄ‚îÄ shared/
‚îÇ           ‚îú‚îÄ‚îÄ LoadingSpinner.jsx
‚îÇ           ‚îú‚îÄ‚îÄ ErrorMessage.jsx
‚îÇ           ‚îî‚îÄ‚îÄ ConfirmDialog.jsx
‚îÇ
‚îî‚îÄ‚îÄ nginx/
    ‚îî‚îÄ‚îÄ proxygate.conf
```

---

## 4. –ë–ê–ó–ê –î–ê–ù–ù–´–• (SQLAlchemy models)

### 4.1 clients
```python
class Client(Base):
    __tablename__ = "clients"
    
    id: Mapped[int] = mapped_column(primary_key=True)
    name: Mapped[str] = mapped_column(String(255))
    email: Mapped[Optional[str]] = mapped_column(String(255))
    phone: Mapped[Optional[str]] = mapped_column(String(50))
    telegram_id: Mapped[Optional[str]] = mapped_column(String(100))
    service_type: Mapped[str] = mapped_column(String(20), default="both")  # vpn / proxy / both
    is_active: Mapped[bool] = mapped_column(default=True)
    access_token: Mapped[str] = mapped_column(String(64), unique=True)     # –°–µ–∫—Ä–µ—Ç–Ω—ã–π —Ç–æ–∫–µ–Ω –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∫–ª–∏–µ–Ω—Ç–∞
    portal_password_hash: Mapped[Optional[str]] = mapped_column(String(255)) # –•–µ—à –ø–∞—Ä–æ–ª—è –¥–ª—è –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞
    # –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞ portal password = VPN password (–º–æ–∂–Ω–æ —Å–º–µ–Ω–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ)
    notes: Mapped[Optional[str]] = mapped_column(Text)
    created_at: Mapped[datetime] = mapped_column(default=func.now())
    updated_at: Mapped[datetime] = mapped_column(default=func.now(), onupdate=func.now())
    
    # Relationships
    vpn_config: Mapped[Optional["VpnConfig"]] = relationship(back_populates="client", uselist=False, cascade="all, delete-orphan")
    proxy_account: Mapped[Optional["ProxyAccount"]] = relationship(back_populates="client", uselist=False, cascade="all, delete-orphan")
    domains: Mapped[List["ClientDomain"]] = relationship(back_populates="client", cascade="all, delete-orphan")
    payments: Mapped[List["Payment"]] = relationship(back_populates="client", cascade="all, delete-orphan")
    domain_requests: Mapped[List["DomainRequest"]] = relationship(back_populates="client", cascade="all, delete-orphan")
```

### 4.2 vpn_configs (IKEv2)
```python
class VpnConfig(Base):
    __tablename__ = "vpn_configs"
    
    id: Mapped[int] = mapped_column(primary_key=True)
    client_id: Mapped[int] = mapped_column(ForeignKey("clients.id", ondelete="CASCADE"), unique=True)
    username: Mapped[str] = mapped_column(String(64), unique=True)    # EAP username: client_001
    password: Mapped[str] = mapped_column(String(64))                 # EAP password (plaintext –¥–ª—è strongSwan)
    assigned_ip: Mapped[Optional[str]] = mapped_column(String(20))    # –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π IP –∏–∑ –ø—É–ª–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    is_active: Mapped[bool] = mapped_column(default=True)
    # –ö—ç—à resolved IPs –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–æ–≤
    resolved_routes: Mapped[Optional[str]] = mapped_column(Text)      # JSON —Å–ø–∏—Å–æ–∫ CIDR –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–æ–≤
    last_resolved: Mapped[Optional[datetime]] = mapped_column()
    
    client: Mapped["Client"] = relationship(back_populates="vpn_config")
```

### 4.3 proxy_accounts
```python
class ProxyAccount(Base):
    __tablename__ = "proxy_accounts"
    
    id: Mapped[int] = mapped_column(primary_key=True)
    client_id: Mapped[int] = mapped_column(ForeignKey("clients.id", ondelete="CASCADE"), unique=True)
    username: Mapped[str] = mapped_column(String(64), unique=True)
    password_hash: Mapped[str] = mapped_column(String(255))
    password_plain: Mapped[str] = mapped_column(String(64))           # –î–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∞–¥–º–∏–Ω—É
    is_active: Mapped[bool] = mapped_column(default=True)
    
    client: Mapped["Client"] = relationship(back_populates="proxy_account")
```

### 4.4 client_domains
```python
class ClientDomain(Base):
    __tablename__ = "client_domains"
    
    id: Mapped[int] = mapped_column(primary_key=True)
    client_id: Mapped[int] = mapped_column(ForeignKey("clients.id", ondelete="CASCADE"))
    domain: Mapped[str] = mapped_column(String(255))
    include_subdomains: Mapped[bool] = mapped_column(default=True)
    is_active: Mapped[bool] = mapped_column(default=True)
    added_at: Mapped[datetime] = mapped_column(default=func.now())
    
    client: Mapped["Client"] = relationship(back_populates="domains")
    __table_args__ = (UniqueConstraint("client_id", "domain"),)
```

### 4.5 domain_templates
```python
class DomainTemplate(Base):
    __tablename__ = "domain_templates"
    
    id: Mapped[int] = mapped_column(primary_key=True)
    name: Mapped[str] = mapped_column(String(100), unique=True)
    description: Mapped[Optional[str]] = mapped_column(String(500))
    icon: Mapped[Optional[str]] = mapped_column(String(10))
    domains_json: Mapped[str] = mapped_column(Text)                   # JSON array
    is_active: Mapped[bool] = mapped_column(default=True)
    created_at: Mapped[datetime] = mapped_column(default=func.now())
```

### 4.6 payments
```python
class Payment(Base):
    __tablename__ = "payments"
    
    id: Mapped[int] = mapped_column(primary_key=True)
    client_id: Mapped[int] = mapped_column(ForeignKey("clients.id", ondelete="CASCADE"))
    amount: Mapped[float] = mapped_column()
    currency: Mapped[str] = mapped_column(String(3), default="RUB")
    paid_at: Mapped[datetime] = mapped_column(default=func.now())
    valid_from: Mapped[date] = mapped_column()
    valid_until: Mapped[date] = mapped_column()
    status: Mapped[str] = mapped_column(String(20), default="paid")
    notes: Mapped[Optional[str]] = mapped_column(Text)
    
    client: Mapped["Client"] = relationship(back_populates="payments")
```

### 4.7 domain_requests (–∑–∞–ø—Ä–æ—Å—ã –∫–ª–∏–µ–Ω—Ç–æ–≤ –Ω–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ–º–µ–Ω–æ–≤)
```python
class DomainRequest(Base):
    __tablename__ = "domain_requests"
    
    id: Mapped[int] = mapped_column(primary_key=True)
    client_id: Mapped[int] = mapped_column(ForeignKey("clients.id", ondelete="CASCADE"))
    domain: Mapped[str] = mapped_column(String(255))                  # –ó–∞–ø—Ä–æ—à–µ–Ω–Ω—ã–π –¥–æ–º–µ–Ω
    reason: Mapped[Optional[str]] = mapped_column(String(500))        # –ó–∞—á–µ–º –Ω—É–∂–µ–Ω (–æ—Ç –∫–ª–∏–µ–Ω—Ç–∞)
    status: Mapped[str] = mapped_column(String(20), default="pending")  # pending / approved / rejected
    admin_comment: Mapped[Optional[str]] = mapped_column(String(500)) # –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∞–¥–º–∏–Ω–∞
    created_at: Mapped[datetime] = mapped_column(default=func.now())
    resolved_at: Mapped[Optional[datetime]] = mapped_column()
    
    client: Mapped["Client"] = relationship(back_populates="domain_requests")
```

### 4.8 admin_users
```python
class AdminUser(Base):
    __tablename__ = "admin_users"
    
    id: Mapped[int] = mapped_column(primary_key=True)
    username: Mapped[str] = mapped_column(String(64), unique=True)
    password_hash: Mapped[str] = mapped_column(String(255))
    totp_secret: Mapped[Optional[str]] = mapped_column(String(64))
    is_active: Mapped[bool] = mapped_column(default=True)
```

### –ù–∞—á–∞–ª—å–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã –¥–æ–º–µ–Ω–æ–≤ (seed data)
```python
INITIAL_TEMPLATES = [
    {
        "name": "AI –°–µ—Ä–≤–∏—Å—ã",
        "icon": "ü§ñ",
        "description": "ChatGPT, Claude, Gemini, Midjourney –∏ –¥—Ä—É–≥–∏–µ AI-–ø–ª–∞—Ç—Ñ–æ—Ä–º—ã",
        "domains": [
            "openai.com", "chat.openai.com", "api.openai.com", "platform.openai.com",
            "chatgpt.com", "oaiusercontent.com",
            "claude.ai", "anthropic.com",
            "gemini.google.com", "bard.google.com", "aistudio.google.com",
            "midjourney.com", "discord.com", "discord.gg",
            "perplexity.ai",
            "poe.com",
            "huggingface.co",
            "replicate.com",
            "stability.ai",
            "copilot.microsoft.com"
        ]
    },
    {
        "name": "–°—Ç—Ä–∏–º–∏–Ω–≥",
        "icon": "üé¨",
        "description": "Netflix, YouTube Premium, Spotify, Disney+ –∏ –¥—Ä.",
        "domains": [
            "netflix.com", "nflxvideo.net", "nflxext.com", "nflximg.net",
            "youtube.com", "googlevideo.com", "ytimg.com", "ggpht.com",
            "spotify.com", "spotifycdn.com", "scdn.co",
            "disneyplus.com", "disney-plus.net", "bamgrid.com", "dssott.com",
            "hbomax.com", "max.com",
            "primevideo.com", "amazonvideo.com"
        ]
    },
    {
        "name": "–°–æ—Ü—Å–µ—Ç–∏",
        "icon": "üì±",
        "description": "Instagram, Twitter/X, Facebook, LinkedIn –∏ –¥—Ä.",
        "domains": [
            "instagram.com", "cdninstagram.com",
            "twitter.com", "x.com", "twimg.com", "t.co",
            "facebook.com", "fbcdn.net", "fb.com", "fb.me",
            "linkedin.com", "licdn.com",
            "threads.net",
            "tiktok.com", "tiktokcdn.com"
        ]
    },
    {
        "name": "–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞",
        "icon": "üíª",
        "description": "GitHub, npm, Docker Hub, StackOverflow –∏ –¥—Ä.",
        "domains": [
            "github.com", "github.io", "githubusercontent.com", "githubassets.com",
            "npmjs.com", "npmjs.org",
            "docker.com", "docker.io",
            "stackoverflow.com", "stackexchange.com",
            "gitlab.com",
            "bitbucket.org",
            "pypi.org", "pythonhosted.org", "files.pythonhosted.org",
            "crates.io",
            "vercel.com", "netlify.com"
        ]
    },
    {
        "name": "Google –°–µ—Ä–≤–∏—Å—ã",
        "icon": "üîç",
        "description": "Google Search, Maps, Drive, Gmail –∏ –¥—Ä.",
        "domains": [
            "google.com", "googleapis.com", "gstatic.com", "googleusercontent.com",
            "google.co.uk", "google.de", "google.fr",
            "gmail.com", "mail.google.com",
            "drive.google.com", "docs.google.com",
            "maps.google.com", "maps.googleapis.com",
            "translate.google.com",
            "play.google.com",
            "accounts.google.com"
        ]
    },
    {
        "name": "–û–±–ª–∞—á–Ω—ã–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞",
        "icon": "‚òÅÔ∏è",
        "description": "Dropbox, OneDrive, iCloud, Notion –∏ –¥—Ä.",
        "domains": [
            "dropbox.com", "dropboxstatic.com",
            "onedrive.com", "onedrive.live.com", "sharepoint.com",
            "icloud.com", "apple.com",
            "box.com", "boxcdn.net",
            "notion.so", "notion.site",
            "mega.nz", "mega.io"
        ]
    }
]
```

---

## 5. API ENDPOINTS

### ‚ïê‚ïê‚ïê ADMIN API (prefix: /api/admin) ‚ïê‚ïê‚ïê
### –¢—Ä–µ–±—É–µ—Ç JWT-—Ç–æ–∫–µ–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∞–¥–º–∏–Ω–∞
```
POST /api/admin/auth/login    ‚Äî { username, password, totp_code? } ‚Üí { access_token, token_type: "admin" }
POST /api/admin/auth/refresh  ‚Äî –û–±–Ω–æ–≤–∏—Ç—å —Ç–æ–∫–µ–Ω
GET  /api/admin/auth/me       ‚Äî –¢–µ–∫—É—â–∏–π –∞–¥–º–∏–Ω
```

### –ö–ª–∏–µ–Ω—Ç—ã
```
GET    /api/admin/clients                    ‚Äî –°–ø–∏—Å–æ–∫ –∫–ª–∏–µ–Ω—Ç–æ–≤ (—Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π, —Ñ–∏–ª—å—Ç—Ä–∞–º–∏)
       Query: ?search=&status=active|inactive|expired&service_type=vpn|proxy|both&page=1&per_page=20
       Response: { items: [...], total, page, pages }

POST   /api/admin/clients                    ‚Äî –°–æ–∑–¥–∞—Ç—å –∫–ª–∏–µ–Ω—Ç–∞
       Body: { name, email?, phone?, telegram_id?, service_type, notes? }
       –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞:
         1. –°–æ–∑–¥–∞—Ç—å –∑–∞–ø–∏—Å—å clients + access_token (UUID4)
         2. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å portal_password (= VPN password –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
         3. –ï—Å–ª–∏ VPN: —Å–æ–∑–¥–∞—Ç—å vpn_configs (username, password), –æ–±–Ω–æ–≤–∏—Ç—å swanctl
         4. –ï—Å–ª–∏ Proxy: —Å–æ–∑–¥–∞—Ç—å proxy_accounts (username, password)
         5. –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å 3proxy –∫–æ–Ω—Ñ–∏–≥
         6. –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç—É —Å—Å—ã–ª–∫—É –Ω–∞ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç (Telegram / email)
         7. –í–µ—Ä–Ω—É—Ç—å –ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç–∞

GET    /api/admin/clients/{id}               ‚Äî –î–µ—Ç–∞–ª–∏ –∫–ª–∏–µ–Ω—Ç–∞ (—Å–æ –≤—Å–µ–º–∏ —Å–≤—è–∑—è–º–∏)
PUT    /api/admin/clients/{id}               ‚Äî –û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç–∞
DELETE /api/admin/clients/{id}               ‚Äî –£–¥–∞–ª–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞ (+ —É–¥–∞–ª–∏—Ç—å –∏–∑ strongSwan, 3proxy)

POST   /api/admin/clients/{id}/activate      ‚Äî –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å
POST   /api/admin/clients/{id}/deactivate    ‚Äî –î–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å (—É–¥–∞–ª–∏—Ç—å –∏–∑ swanctl, 3proxy)
```

### –î–æ–º–µ–Ω—ã –∫–ª–∏–µ–Ω—Ç–∞ (–∞–¥–º–∏–Ω)
```
GET    /api/admin/clients/{id}/domains       ‚Äî –°–ø–∏—Å–æ–∫ –¥–æ–º–µ–Ω–æ–≤ –∫–ª–∏–µ–Ω—Ç–∞
POST   /api/admin/clients/{id}/domains       ‚Äî –î–æ–±–∞–≤–∏—Ç—å –¥–æ–º–µ–Ω(—ã)
       Body: { domains: ["example.com", "test.org"], include_subdomains: true }
       –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞:
         1. –î–æ–±–∞–≤–∏—Ç—å –≤ client_domains
         2. –†–µ–∑–æ–ª–≤–∏—Ç—å –¥–æ–º–µ–Ω—ã ‚Üí CIDR –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–æ–≤
         3. –û–±–Ω–æ–≤–∏—Ç—å resolved_routes –≤ vpn_configs
         4. –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å 3proxy ACL
         5. –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å PAC-—Ñ–∞–π–ª –∫–ª–∏–µ–Ω—Ç–∞

DELETE /api/admin/clients/{id}/domains/{domain_id}
POST   /api/admin/clients/{id}/domains/template      ‚Äî –ü—Ä–∏–º–µ–Ω–∏—Ç—å —à–∞–±–ª–æ–Ω { template_id }
POST   /api/admin/clients/{id}/domains/sync          ‚Äî –ü–µ—Ä–µ—Ä–µ–∑–æ–ª–≤–∏—Ç—å DNS ‚Üí –æ–±–Ω–æ–≤–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç—ã
```

### –ó–∞–ø—Ä–æ—Å—ã –Ω–∞ –¥–æ–º–µ–Ω—ã (–æ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤ ‚Üí –æ–¥–æ–±—Ä–µ–Ω–∏–µ –∞–¥–º–∏–Ω–æ–º)
```
GET    /api/admin/domain-requests              ‚Äî –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã (?status=pending|approved|rejected)
PUT    /api/admin/domain-requests/{id}/approve ‚Äî –û–¥–æ–±—Ä–∏—Ç—å { admin_comment? }
       –î–µ–π—Å—Ç–≤–∏—è: —Å–æ–∑–¥–∞—Ç—å ClientDomain + –ø–µ—Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥–æ–≤ + —É–≤–µ–¥–æ–º–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞
PUT    /api/admin/domain-requests/{id}/reject  ‚Äî –û—Ç–∫–ª–æ–Ω–∏—Ç—å { admin_comment }
       –î–µ–π—Å—Ç–≤–∏—è: —É–≤–µ–¥–æ–º–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞
```

### VPN (IKEv2)
```
GET    /api/admin/clients/{id}/vpn/credentials   ‚Äî –ü–æ–ª—É—á–∏—Ç—å username/password
POST   /api/admin/clients/{id}/vpn/reset-password ‚Äî –ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å ‚Üí –æ–±–Ω–æ–≤–∏—Ç—å swanctl
GET    /api/admin/clients/{id}/vpn/routes         ‚Äî –°–ø–∏—Å–æ–∫ CIDR-–º–∞—Ä—à—Ä—É—Ç–æ–≤ –∫–ª–∏–µ–Ω—Ç–∞
```

### Proxy
```
GET    /api/admin/clients/{id}/proxy/credentials     ‚Äî –ü–æ–ª—É—á–∏—Ç—å –ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å
POST   /api/admin/clients/{id}/proxy/reset-password  ‚Äî –ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å
GET    /api/admin/clients/{id}/proxy/pac             ‚Äî –°–∫–∞—á–∞—Ç—å PAC-—Ñ–∞–π–ª
```

### –ü—Ä–æ—Ñ–∏–ª–∏ (—Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥–æ–≤ ‚Äî –∏–∑ –∞–¥–º–∏–Ω–∫–∏)
```
GET    /api/admin/clients/{id}/profiles/windows      ‚Äî PowerShell —Å–∫—Ä–∏–ø—Ç (.ps1)
GET    /api/admin/clients/{id}/profiles/ios          ‚Äî .mobileconfig (IKEv2)
GET    /api/admin/clients/{id}/profiles/macos        ‚Äî .mobileconfig (IKEv2)
GET    /api/admin/clients/{id}/profiles/android      ‚Äî .sswan –ø—Ä–æ—Ñ–∏–ª—å
```

### –®–∞–±–ª–æ–Ω—ã –¥–æ–º–µ–Ω–æ–≤
```
GET    /api/admin/templates                  ‚Äî –°–ø–∏—Å–æ–∫ —à–∞–±–ª–æ–Ω–æ–≤
POST   /api/admin/templates                  ‚Äî –°–æ–∑–¥–∞—Ç—å —à–∞–±–ª–æ–Ω
PUT    /api/admin/templates/{id}             ‚Äî –û–±–Ω–æ–≤–∏—Ç—å
DELETE /api/admin/templates/{id}             ‚Äî –£–¥–∞–ª–∏—Ç—å
```

### –ü–ª–∞—Ç–µ–∂–∏
```
GET    /api/admin/clients/{id}/payments              ‚Äî –ò—Å—Ç–æ—Ä–∏—è
POST   /api/admin/clients/{id}/payments              ‚Äî –î–æ–±–∞–≤–∏—Ç—å –ø–ª–∞—Ç—ë–∂ { amount, valid_from, valid_until }
PUT    /api/admin/payments/{id}                      ‚Äî –û–±–Ω–æ–≤–∏—Ç—å
DELETE /api/admin/payments/{id}                      ‚Äî –£–¥–∞–ª–∏—Ç—å
```

### Dashboard (–∞–¥–º–∏–Ω)
```
GET    /api/admin/dashboard
       Response: {
         total_clients, active_clients, inactive_clients,
         expiring_soon: [...],  // –û–ø–ª–∞—Ç–∞ –∏—Å—Ç–µ–∫–∞–µ—Ç ‚â§ 7 –¥–Ω–µ–π
         expired: [...],
         pending_domain_requests: int,  // –ù–µ–ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –¥–æ–º–µ–Ω—ã
         total_domains,
         recent_clients: [...]  // –ü–æ—Å–ª–µ–¥–Ω–∏–µ 5 —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö
       }
```

---

### ‚ïê‚ïê‚ïê CLIENT PORTAL API (prefix: /api/portal) ‚ïê‚ïê‚ïê
### –¢—Ä–µ–±—É–µ—Ç JWT-—Ç–æ–∫–µ–Ω –∫–ª–∏–µ–Ω—Ç–∞. –ö–ª–∏–µ–Ω—Ç –≤–∏–¥–∏—Ç –¢–û–õ–¨–ö–û —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ.

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞
```
POST /api/portal/auth/login    ‚Äî { username, password } ‚Üí { access_token, token_type: "client" }
       username = VPN-–ª–æ–≥–∏–Ω (client_001)
       password = portal-–ø–∞—Ä–æ–ª—å (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é = VPN-–ø–∞—Ä–æ–ª—å, –º–æ–∂–Ω–æ —Å–º–µ–Ω–∏—Ç—å)
       
POST /api/portal/auth/refresh  ‚Äî –û–±–Ω–æ–≤–∏—Ç—å —Ç–æ–∫–µ–Ω
```

### –ì–ª–∞–≤–Ω–∞—è –∫–ª–∏–µ–Ω—Ç–∞ ‚Äî —Å—Ç–∞—Ç—É—Å –∏ –æ–±–∑–æ—Ä
```
GET  /api/portal/me
     Response: {
       name: "–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω",
       username: "client_001",
       is_active: true,
       service_type: "both",
       subscription: {
         status: "active",          // active / expiring / expired / none
         valid_until: "2026-03-15",
         days_left: 40
       },
       domains_count: 12,
       pending_requests: 1
     }
```

### –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–µ–π (–∏–∑ –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞)
```
GET  /api/portal/profiles/windows     ‚Äî PowerShell —Å–∫—Ä–∏–ø—Ç (.ps1)
GET  /api/portal/profiles/ios         ‚Äî .mobileconfig –¥–ª—è iPhone
GET  /api/portal/profiles/macos       ‚Äî .mobileconfig –¥–ª—è macOS
GET  /api/portal/profiles/android     ‚Äî .sswan –¥–ª—è Android
GET  /api/portal/profiles/pac         ‚Äî PAC-—Ñ–∞–π–ª –¥–ª—è –ø—Ä–æ–∫—Å–∏
GET  /api/portal/profiles/info        ‚Äî –í—Å–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (JSON)
     Response: {
       vpn: { server: "vpn.domain.com", username: "client_001", password: "xxx" },
       proxy: { host: "51.xx.xx.xx", http_port: 3128, socks_port: 1080, 
                username: "client_001", password: "xxx" },
       pac_url: "https://vpn.domain.com/pac/client_001"
     }
```

### –ú–æ–∏ –¥–æ–º–µ–Ω—ã (read-only + –∑–∞–ø—Ä–æ—Å—ã)
```
GET  /api/portal/domains
     Response: {
       domains: [
         { domain: "openai.com", include_subdomains: true, added_at: "..." },
         { domain: "google.com", include_subdomains: true, added_at: "..." },
         ...
       ],
       grouped_by_template: {
         "AI –°–µ—Ä–≤–∏—Å—ã": ["openai.com", "claude.ai", ...],
         "Google": ["google.com", "youtube.com", ...],
         "–î—Ä—É–≥–æ–µ": ["custom-site.com"]
       }
     }

POST /api/portal/domains/request
     Body: { domain: "newsite.com", reason: "–ù—É–∂–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏" }
     –î–µ–π—Å—Ç–≤–∏—è:
       1. –°–æ–∑–¥–∞—Ç—å DomainRequest (status=pending)
       2. –£–≤–µ–¥–æ–º–∏—Ç—å –∞–¥–º–∏–Ω–∞ –≤ Telegram
     Response: { id, domain, status: "pending", message: "–ó–∞–ø—Ä–æ—Å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É" }

GET  /api/portal/domains/requests
     Response: [
       { id: 1, domain: "newsite.com", status: "pending", created_at: "..." },
       { id: 2, domain: "oldsite.com", status: "approved", resolved_at: "..." },
       { id: 3, domain: "badsite.com", status: "rejected", admin_comment: "...", resolved_at: "..." }
     ]
```

### –ú–æ–∏ –ø–ª–∞—Ç–µ–∂–∏ (read-only)
```
GET  /api/portal/payments
     Response: {
       current_subscription: {
         valid_until: "2026-03-15",
         days_left: 40,
         status: "active"
       },
       history: [
         { paid_at: "2026-02-01", amount: 500, currency: "RUB", period: "01.02-15.03.2026" },
         ...
       ]
     }
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–æ–º
```
POST /api/portal/account/change-password
     Body: { old_password, new_password }
     –î–µ–π—Å—Ç–≤–∏—è: –æ–±–Ω–æ–≤–∏—Ç—å portal_password_hash
     (VPN-–ø–∞—Ä–æ–ª—å –ù–ï –º–µ–Ω—è–µ—Ç—Å—è ‚Äî –µ–≥–æ –º–µ–Ω—è–µ—Ç —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω)
     
GET  /api/portal/account/setup-guides
     Response: {
       windows: { steps: [...], video_url?: "..." },
       ios: { steps: [...] },
       macos: { steps: [...] },
       android: { steps: [...] }
     }
```

---

### ‚ïê‚ïê‚ïê –ü–£–ë–õ–ò–ß–ù–´–ï ENDPOINTS (–±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏) ‚ïê‚ïê‚ïê
```
GET    /connect/{access_token}                 ‚Äî –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–ª–∏–µ–Ω—Ç–∞ (HTML)
       –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –±—ã—Å—Ç—Ä—ã–π –≤—Ö–æ–¥ –±–µ–∑ –ª–æ–≥–∏–Ω–∞/–ø–∞—Ä–æ–ª—è
       –°–æ–¥–µ—Ä–∂–∏—Ç —Å—Å—ã–ª–∫—É ¬´–í–æ–π—Ç–∏ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç¬ª

GET    /download/{access_token}/windows        ‚Äî –°–∫–∞—á–∞—Ç—å PowerShell —Å–∫—Ä–∏–ø—Ç
GET    /download/{access_token}/ios            ‚Äî –°–∫–∞—á–∞—Ç—å .mobileconfig
GET    /download/{access_token}/macos          ‚Äî –°–∫–∞—á–∞—Ç—å .mobileconfig
GET    /download/{access_token}/android        ‚Äî –°–∫–∞—á–∞—Ç—å .sswan
GET    /download/{access_token}/pac            ‚Äî –°–∫–∞—á–∞—Ç—å PAC-—Ñ–∞–π–ª
```

---

## 6. –°–ï–†–í–ò–°–´ (backend/app/services/)

### 6.1 ikev2_manager.py ‚Äî –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ strongSwan IKEv2

```python
class IKEv2Manager:
    """
    –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ strongSwan IKEv2/IPsec VPN —Å–µ—Ä–≤–µ—Ä–æ–º.
    
    strongSwan –∏—Å–ø–æ–ª—å–∑—É–µ—Ç swanctl (–Ω–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å) –≤–º–µ—Å—Ç–æ —É—Å—Ç–∞—Ä–µ–≤—à–µ–≥–æ ipsec.
    –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è: /etc/swanctl/conf.d/ ‚Äî –ø–æ —Ñ–∞–π–ª—É –Ω–∞ –∫–∞–∂–¥—É—é connection.
    –°–µ–∫—Ä–µ—Ç—ã (EAP): /etc/swanctl/conf.d/secrets.conf
    
    –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —Å–µ—Ä–≤–µ—Ä–∞: Let's Encrypt (—Ç–æ—Ç –∂–µ —á—Ç–æ –¥–ª—è Nginx).
    –ö–ª–∏–µ–Ω—Ç—ã –¥–æ–≤–µ—Ä—è—é—Ç Let's Encrypt CA –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Üí –ù–û–õ–¨ —Ä—É—á–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤.
    """
    
    SWANCTL_DIR = "/etc/swanctl"
    CONF_DIR = "/etc/swanctl/conf.d"
    CONNECTIONS_FILE = f"{CONF_DIR}/connections.conf"
    SECRETS_FILE = f"{CONF_DIR}/secrets.conf"
    
    def generate_connections_conf(self, active_clients: list) -> str:
        """
        –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç /etc/swanctl/conf.d/connections.conf
        
        –û–¥–Ω–æ –æ–±—â–µ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –¥–ª—è –≤—Å–µ—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤:
        
        connections {
            proxygate {
                version = 2
                proposals = aes256-sha256-modp2048,aes256-sha384-ecp384
                rekey_time = 0s
                pools = client_pool
                fragmentation = yes
                dpd_delay = 30s
                send_certreq = no
                
                local {
                    auth = pubkey
                    certs = fullchain.pem
                    id = vpn.yourdomain.com
                }
                
                remote {
                    auth = eap-mschapv2
                    eap_id = %any
                }
                
                children {
                    proxygate-child {
                        local_ts = 0.0.0.0/0
                        esp_proposals = aes256-sha256,aes256-sha384
                        dpd_action = clear
                        rekey_time = 0s
                    }
                }
            }
        }
        
        pools {
            client_pool {
                addrs = 10.0.0.0/24
                dns = 1.1.1.1, 8.8.8.8
            }
        }
        """
        
    def generate_secrets_conf(self, active_clients: list) -> str:
        """
        –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç /etc/swanctl/conf.d/secrets.conf
        
        secrets {
            private-server {
                file = privkey.pem
            }
            
            eap-client_001 {
                id = client_001
                secret = "—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π_–ø–∞—Ä–æ–ª—å_1"
            }
            
            eap-client_002 {
                id = client_002
                secret = "—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π_–ø–∞—Ä–æ–ª—å_2"
            }
            
            # ... –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞
        }
        """
    
    def reload(self) -> None:
        """
        –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ strongSwan:
        
        subprocess.run(["swanctl", "--load-all"], check=True)
        
        –≠—Ç–æ –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –±–µ–∑ —Ä–∞–∑—Ä—ã–≤–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π.
        """
        
    def terminate_client(self, username: str) -> None:
        """
        –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞:
        
        swanctl --terminate --ike <sa-name> 
        (–Ω–∞—Ö–æ–¥–∏–º SA –ø–æ identity = username)
        """
        
    def get_active_sessions(self) -> list[dict]:
        """
        –¢–µ–∫—É—â–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:
        
        swanctl --list-sas ‚Üí –ø–∞—Ä—Å–∏–Ω–≥
        –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: [{username, remote_ip, connected_since, bytes_in, bytes_out}]
        """
    
    def add_client(self, username: str, password: str) -> None:
        """–î–æ–±–∞–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞: –æ–±–Ω–æ–≤–∏—Ç—å secrets.conf + reload"""
        
    def remove_client(self, username: str) -> None:
        """–£–¥–∞–ª–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞: terminate + –æ–±–Ω–æ–≤–∏—Ç—å secrets.conf + reload"""
        
    def change_password(self, username: str, new_password: str) -> None:
        """–°–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å: –æ–±–Ω–æ–≤–∏—Ç—å secrets.conf + reload"""
```

### 6.2 domain_resolver.py ‚Äî –†–µ–∑–æ–ª–≤–∏–Ω–≥ –¥–æ–º–µ–Ω–æ–≤ –≤ IP

```python
class DomainResolver:
    """
    –†–µ–∑–æ–ª–≤–∏—Ç –¥–æ–º–µ–Ω—ã –∫–ª–∏–µ–Ω—Ç–∞ –≤ CIDR-–±–ª–æ–∫–∏ –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–æ–≤.
    
    –ú–∞—Ä—à—Ä—É—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤:
    - Windows: Add-VpnConnectionRoute (PowerShell —Å–∫—Ä–∏–ø—Ç)
    - iOS/macOS: .mobileconfig ‚Üí IPv4 ‚Üí IncludedRoutes
    - Android: strongSwan App ‚Üí Split tunneling routes
    - PAC-—Ñ–∞–π–ª—ã: –ø–æ –¥–æ–º–µ–Ω–∞–º (–Ω–µ IP)
    """
    
    async def resolve_domain(self, domain: str, include_subdomains: bool = True) -> list[str]:
        """
        –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ä–µ–∑–æ–ª–≤–∏–Ω–≥–∞:
        1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å KNOWN_CIDRS ‚Äî –ø—Ä–µ–¥–∑–∞–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–µ –ø–æ–¥—Å–µ—Ç–∏ –∫—Ä—É–ø–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
        2. DNS A/AAAA –∑–∞–ø–∏—Å–∏ ‚Üí —Ä–∞—Å—à–∏—Ä–∏—Ç—å –¥–æ /24 (—á—Ç–æ–±—ã –ø–æ–∫—Ä—ã—Ç—å CDN)
        3. –ï—Å–ª–∏ include_subdomains ‚Äî —Ç–∞–∫–∂–µ www., cdn., api. + wildcard
        4. –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –∏ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—â–∏—Ö—Å—è CIDR
        
        –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: ["104.18.0.0/16", "172.64.0.0/13", ...]
        """
        
    async def resolve_client_domains(self, client_id: int) -> list[str]:
        """–†–µ–∑–æ–ª–≤–∏—Ç –í–°–ï –¥–æ–º–µ–Ω—ã –∫–ª–∏–µ–Ω—Ç–∞ ‚Üí –µ–¥–∏–Ω—ã–π —Å–ø–∏—Å–æ–∫ CIDR"""
        
    async def update_all_clients(self) -> dict:
        """
        Cron-–∑–∞–¥–∞—á–∞ (–∫–∞–∂–¥—ã–µ 30 –º–∏–Ω):
        –û–±–Ω–æ–≤–∏—Ç—å resolved_routes –¥–ª—è –≤—Å–µ—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤.
        –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: {client_id: [new_routes_count, changed: bool]}
        """
    
    # –ü—Ä–µ–¥–∑–∞–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–µ CIDR –¥–ª—è –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
    # (—Ä–µ–∑–æ–ª–≤–∏—Ç—å DNS –¥–ª—è –Ω–∏—Ö –Ω–µ–Ω–∞–¥—ë–∂–Ω–æ ‚Äî CDN –º–µ–Ω—è–µ—Ç IP)
    KNOWN_CIDRS = {
        "openai.com":       ["104.18.0.0/16", "172.64.0.0/13"],
        "chatgpt.com":      ["104.18.0.0/16", "172.64.0.0/13"],
        "claude.ai":        ["104.18.0.0/16", "172.64.0.0/13"],
        "anthropic.com":    ["104.18.0.0/16", "172.64.0.0/13"],
        "netflix.com":      ["23.246.0.0/18", "37.77.184.0/21", "45.57.0.0/17",
                             "64.120.128.0/17", "108.175.32.0/20", "185.2.220.0/22",
                             "185.9.188.0/22", "192.173.64.0/18", "198.38.96.0/19",
                             "198.45.48.0/20"],
        "google.com":       ["142.250.0.0/15", "172.217.0.0/16", "216.58.192.0/19",
                             "172.253.0.0/16", "74.125.0.0/16", "173.194.0.0/16"],
        "youtube.com":      ["142.250.0.0/15", "172.217.0.0/16", "216.58.192.0/19",
                             "172.253.0.0/16", "74.125.0.0/16", "173.194.0.0/16"],
        "googlevideo.com":  ["142.250.0.0/15", "172.217.0.0/16", "172.253.0.0/16"],
        "facebook.com":     ["157.240.0.0/16", "31.13.24.0/21", "31.13.64.0/18",
                             "179.60.192.0/22", "185.60.216.0/22"],
        "instagram.com":    ["157.240.0.0/16", "31.13.24.0/21", "31.13.64.0/18"],
        "twitter.com":      ["104.244.42.0/24", "104.244.46.0/24", "199.16.156.0/22",
                             "199.59.148.0/22"],
        "x.com":            ["104.244.42.0/24", "104.244.46.0/24", "199.16.156.0/22"],
        "linkedin.com":     ["108.174.0.0/20", "144.2.0.0/16"],
        "github.com":       ["140.82.112.0/20", "185.199.108.0/22", "192.30.252.0/22",
                             "143.55.64.0/20"],
        "spotify.com":      ["35.186.224.0/20", "78.31.8.0/21", "194.132.196.0/22"],
        "discord.com":      ["162.159.0.0/16"],
        "discord.gg":       ["162.159.0.0/16"],
        "tiktok.com":       ["16.0.0.0/8", "34.0.0.0/8", "99.0.0.0/8"],
        # CDN –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã (–ø–æ–∫—Ä—ã–≤–∞—é—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Å–µ—Ä–≤–∏—Å–æ–≤ —á–µ—Ä–µ–∑ Cloudflare/Fastly)
        "cloudflare":       ["104.16.0.0/12", "172.64.0.0/13", "131.0.72.0/22"],
    }
```

### 6.3 route_manager.py ‚Äî –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞–º–∏

```python
class RouteManager:
    """
    –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç per-client —Å–ø–∏—Å–∫–∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –¥–ª—è split tunneling.
    –ú–∞—Ä—à—Ä—É—Ç—ã = CIDR-–±–ª–æ–∫–∏ IP-–∞–¥—Ä–µ—Å–æ–≤ –¥–æ–º–µ–Ω–æ–≤ –∫–ª–∏–µ–Ω—Ç–∞.
    
    –û–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ —Å–ø–∏—Å–æ–∫ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:
    - PowerShell (Add-VpnConnectionRoute)
    - .mobileconfig (IncludedRoutes)
    - .sswan (split tunneling)
    """
    
    def get_client_routes(self, client_id: int) -> list[str]:
        """
        –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ CIDR –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞.
        –ß–∏—Ç–∞–µ—Ç –∏–∑ vpn_configs.resolved_routes (–∫—ç—à).
        """
    
    def optimize_routes(self, cidrs: list[str]) -> list[str]:
        """
        –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–ø–∏—Å–∫–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤:
        1. –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏–∫–∞—Ç—ã
        2. –û–±—ä–µ–¥–∏–Ω–∏—Ç—å –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—â–∏–µ—Å—è CIDR (10.0.0.0/24 + 10.0.1.0/24 ‚Üí 10.0.0.0/23)
        3. –£–¥–∞–ª–∏—Ç—å –ø–æ–¥—Å–µ—Ç–∏, –∫–æ—Ç–æ—Ä—ã–µ —É–∂–µ –ø–æ–∫—Ä—ã—Ç—ã –±–æ–ª–µ–µ —à–∏—Ä–æ–∫–æ–π (10.0.0.5/32 –≤–Ω—É—Ç—Ä–∏ 10.0.0.0/24)
        4. –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
        
        –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ipaddress.collapse_addresses() –∏–∑ stdlib.
        """
```

### 6.4 profile_generator.py ‚Äî –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ—Ñ–∏–ª–µ–π –¥–ª—è –≤—Å–µ—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º

```python
class ProfileGenerator:
    """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã"""
    
    def generate_windows_ps1(self, client: Client, routes: list[str]) -> str:
        """
        PowerShell —Å–∫—Ä–∏–ø—Ç (.ps1) –¥–ª—è Windows 10/11.
        
        –ö–ª–∏–µ–Ω—Ç —Å–∫–∞—á–∏–≤–∞–µ—Ç ‚Üí –∑–∞–ø—É—Å–∫–∞–µ—Ç –æ—Ç –∏–º–µ–Ω–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ ‚Üí VPN –Ω–∞—Å—Ç—Ä–æ–µ–Ω.
        
        –°–∫—Ä–∏–ø—Ç:
        1. –°–æ–∑–¥–∞—ë—Ç VPN-–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ (Add-VpnConnection IKEv2)
        2. –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ (Set-VpnConnectionIPsecConfiguration)
        3. –í–∫–ª—é—á–∞–µ—Ç split tunneling
        4. –î–æ–±–∞–≤–ª—è–µ—Ç –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è –¥–æ–º–µ–Ω–æ–≤ –∫–ª–∏–µ–Ω—Ç–∞
        5. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –ª–æ–≥–∏–Ω (–ø–∞—Ä–æ–ª—å –≤–≤–æ–¥–∏—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏)
        """
        # –®–∞–±–ª–æ–Ω –Ω–∏–∂–µ –≤ —Ä–∞–∑–¥–µ–ª–µ 7
        
    def generate_ios_mobileconfig(self, client: Client, routes: list[str]) -> bytes:
        """
        .mobileconfig –¥–ª—è iOS (iPhone/iPad).
        
        –ö–ª–∏–µ–Ω—Ç —Å–∫–∞—á–∏–≤–∞–µ—Ç ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ü—Ä–æ—Ñ–∏–ª—å ‚Üí –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å ‚Üí VPN –≥–æ—Ç–æ–≤.
        
        –ü—Ä–æ—Ñ–∏–ª—å —Å–æ–¥–µ—Ä–∂–∏—Ç:
        1. IKEv2 VPN –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
        2. –õ–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å (EAP)
        3. On-Demand –ø—Ä–∞–≤–∏–ª–∞ (–∞–≤—Ç–æ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ)
        4. Split tunneling –º–∞—Ä—à—Ä—É—Ç—ã
        """
        
    def generate_macos_mobileconfig(self, client: Client, routes: list[str]) -> bytes:
        """
        .mobileconfig –¥–ª—è macOS.
        –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ iOS, –Ω–æ —Å –¥—Ä—É–≥–∏–º PayloadType –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–æ–≤.
        """
        
    def generate_android_sswan(self, client: Client, routes: list[str]) -> bytes:
        """
        .sswan –ø—Ä–æ—Ñ–∏–ª—å –¥–ª—è strongSwan Android App.
        
        –§–æ—Ä–º–∞—Ç: JSON, zip-–∞—Ä—Ö–∏–≤ —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º .sswan
        
        {
            "uuid": "...",
            "name": "ProxyGate VPN",
            "type": "ikev2-eap",
            "remote": {
                "addr": "vpn.yourdomain.com",
                "id": "vpn.yourdomain.com"
            },
            "local": {
                "eap_id": "client_001"
            },
            "split-tunneling": {
                "subnets": ["104.18.0.0/16", "142.250.0.0/15", ...]
            }
        }
        """
    
    def generate_client_page_html(self, client: Client) -> str:
        """
        HTML-—Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–ª–∏–µ–Ω—Ç–∞ (–ø–æ —Å–µ–∫—Ä–µ—Ç–Ω–æ–º—É access_token).
        –°–æ–¥–µ—Ä–∂–∏—Ç –∫–Ω–æ–ø–∫–∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º + –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏.
        """
```

### 6.5 proxy_manager.py ‚Äî –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 3proxy

```python
class ProxyManager:
    """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥–æ–≤ 3proxy –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–º"""
    
    CONFIG_PATH = "/etc/3proxy/3proxy.cfg"
    PASSWD_PATH = "/etc/3proxy/passwd"
    
    def generate_config(self, active_clients: list) -> str:
        """
        –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥ 3proxy.
        Per-client ACL —Å whitelist –¥–æ–º–µ–Ω–æ–≤.
        """
        
    def generate_passwd(self, accounts: list) -> str:
        """username:CL:password"""
        
    def reload(self) -> None:
        """kill -HUP $(pidof 3proxy)"""
        
    def apply_changes(self) -> None:
        """–ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª: –≥–µ–Ω–µ—Ä–∞—Ü–∏—è + reload"""
```

### 6.6 pac_generator.py ‚Äî PAC-—Ñ–∞–π–ª—ã

```python
class PacGenerator:
    """Per-client PAC —Ñ–∞–π–ª—ã –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–∫—Å–∏-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏"""
    
    def generate(self, client_id: int, domains: list[str]) -> str:
        """JavaScript PAC —Ñ–∞–π–ª —Å –¥–æ–º–µ–Ω–∞–º–∏ –∫–ª–∏–µ–Ω—Ç–∞"""
```

### 6.7 payment_checker.py ‚Äî –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–ø–ª–∞—Ç—ã

```python
class PaymentChecker:
    """Cron –∫–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç"""
    
    async def check_all(self) -> None:
        """
        1. –ù–∞–π—Ç–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤ –±–µ–∑ –¥–µ–π—Å—Ç–≤—É—é—â–µ–π –æ–ø–ª–∞—Ç—ã ‚Üí –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å
        2. –ù–∞–π—Ç–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤ —Å –æ–ø–ª–∞—Ç–æ–π ‚â§ 3 –¥–Ω—è ‚Üí –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –≤ Telegram
        """
```

### 6.8 telegram_bot.py ‚Äî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

```python
class TelegramNotifier:
    """aiogram 3 –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π"""
    
    async def notify_admin(self, message: str) -> None: ...
    async def notify_client(self, client: Client, message: str) -> None: ...
    async def send_payment_reminder(self, client: Client, days_left: int) -> None: ...
    async def send_profile_file(self, client: Client, file_data: bytes, filename: str) -> None: ...
```

---

## 7. –ì–ï–ù–ï–†–ê–¶–ò–Ø –ö–û–ù–§–ò–ì–û–í (–ø–æ–ª–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã)

### 7.1 Windows PowerShell —Å–∫—Ä–∏–ø—Ç (–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è per-client)

```powershell
# ============================================
# ProxyGate VPN ‚Äî –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è Windows
# –ö–ª–∏–µ–Ω—Ç: –ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á
# –î–∞—Ç–∞: 2026-02-03
# ============================================
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —ç—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –æ—Ç –∏–º–µ–Ω–∏ –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞!
# –ü—Ä–∞–≤—ã–π –∫–ª–∏–∫ ‚Üí "–ó–∞–ø—É—Å–∫ –æ—Ç –∏–º–µ–Ω–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞"
# ============================================

$ErrorActionPreference = "Stop"
$VpnName = "ProxyGate VPN"
$ServerAddress = "vpn.yourdomain.com"
$Username = "client_001"

Write-Host "=== ProxyGate VPN Setup ===" -ForegroundColor Cyan
Write-Host ""

# –£–¥–∞–ª–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
try {
    Remove-VpnConnection -Name $VpnName -Force -ErrorAction SilentlyContinue
    Write-Host "[OK] –°—Ç–∞—Ä–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–æ" -ForegroundColor Yellow
} catch {}

# –°–æ–∑–¥–∞—Ç—å VPN –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ IKEv2
Write-Host "[1/4] –°–æ–∑–¥–∞–Ω–∏–µ VPN –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è..." -ForegroundColor Green
Add-VpnConnection `
    -Name $VpnName `
    -ServerAddress $ServerAddress `
    -TunnelType Ikev2 `
    -AuthenticationMethod Eap `
    -EncryptionLevel Required `
    -SplitTunneling `
    -RememberCredential `
    -DnsSuffix ""

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ IKEv2
Write-Host "[2/4] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è..." -ForegroundColor Green
Set-VpnConnectionIPsecConfiguration -ConnectionName $VpnName `
    -AuthenticationTransformConstants SHA256128 `
    -CipherTransformConstants AES256 `
    -DHGroup Group14 `
    -IntegrityCheckMethod SHA256 `
    -PfsGroup PFS2048 `
    -EncryptionMethod AES256 `
    -Force

# –î–æ–±–∞–≤–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è –≤–∞—à–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
Write-Host "[3/4] –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤..." -ForegroundColor Green

# --- AI –°–µ—Ä–≤–∏—Å—ã (OpenAI, Claude, Anthropic) ---
Add-VpnConnectionRoute -ConnectionName $VpnName -DestinationPrefix "104.18.0.0/16" -PassThru | Out-Null
Add-VpnConnectionRoute -ConnectionName $VpnName -DestinationPrefix "172.64.0.0/13" -PassThru | Out-Null

# --- Google (Search, YouTube, Gmail, Drive) ---
Add-VpnConnectionRoute -ConnectionName $VpnName -DestinationPrefix "142.250.0.0/15" -PassThru | Out-Null
Add-VpnConnectionRoute -ConnectionName $VpnName -DestinationPrefix "172.217.0.0/16" -PassThru | Out-Null
Add-VpnConnectionRoute -ConnectionName $VpnName -DestinationPrefix "172.253.0.0/16" -PassThru | Out-Null
Add-VpnConnectionRoute -ConnectionName $VpnName -DestinationPrefix "216.58.192.0/19" -PassThru | Out-Null
Add-VpnConnectionRoute -ConnectionName $VpnName -DestinationPrefix "74.125.0.0/16" -PassThru | Out-Null
Add-VpnConnectionRoute -ConnectionName $VpnName -DestinationPrefix "173.194.0.0/16" -PassThru | Out-Null

# === –ú–ê–†–®–†–£–¢–´ –ì–ï–ù–ï–†–ò–†–£–Æ–¢–°–Ø –î–ò–ù–ê–ú–ò–ß–ï–°–ö–ò –î–õ–Ø –ö–ê–ñ–î–û–ì–û –ö–õ–ò–ï–ù–¢–ê ===

# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —É—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
Write-Host "[4/4] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É—á—ë—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö..." -ForegroundColor Green
# –õ–æ–≥–∏–Ω —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ —Å–∏—Å—Ç–µ–º–µ, –ø–∞—Ä–æ–ª—å ‚Äî –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏
cmdkey /generic:$ServerAddress /user:$Username

Write-Host ""
Write-Host "============================================" -ForegroundColor Cyan
Write-Host " VPN —É—Å–ø–µ—à–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω!" -ForegroundColor Green
Write-Host "============================================" -ForegroundColor Cyan
Write-Host ""
Write-Host " –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ > –°–µ—Ç—å > VPN > $VpnName"
Write-Host " –õ–æ–≥–∏–Ω: $Username"
Write-Host " –ü–∞—Ä–æ–ª—å: (–≤–≤–µ–¥–∏—Ç–µ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏)"
Write-Host ""
Write-Host " –ß–µ—Ä–µ–∑ VPN —Ä–∞–±–æ—Ç–∞—é—Ç:"
Write-Host "   - openai.com, claude.ai (AI)"
Write-Host "   - google.com, youtube.com (Google)"
Write-Host " –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å–∞–π—Ç—ã ‚Äî –Ω–∞–ø—Ä—è–º—É—é."
Write-Host ""
Read-Host "–ù–∞–∂–º–∏—Ç–µ Enter –¥–ª—è –≤—ã—Ö–æ–¥–∞"
```

### 7.2 iOS .mobileconfig (IKEv2 + On-Demand + Split Tunnel)

```xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN"
  "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>PayloadContent</key>
    <array>
        <dict>
            <!-- VPN Payload -->
            <key>PayloadType</key>
            <string>com.apple.vpn.managed</string>
            <key>PayloadVersion</key>
            <integer>1</integer>
            <key>PayloadIdentifier</key>
            <string>com.proxygate.vpn.{{CLIENT_ID}}</string>
            <key>PayloadUUID</key>
            <string>{{VPN_UUID}}</string>
            <key>PayloadDisplayName</key>
            <string>ProxyGate VPN</string>
            
            <key>UserDefinedName</key>
            <string>ProxyGate VPN</string>
            <key>VPNType</key>
            <string>IKEv2</string>
            
            <key>IKEv2</key>
            <dict>
                <key>RemoteAddress</key>
                <string>vpn.yourdomain.com</string>
                <key>RemoteIdentifier</key>
                <string>vpn.yourdomain.com</string>
                <key>LocalIdentifier</key>
                <string>{{USERNAME}}</string>
                
                <!-- EAP –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è -->
                <key>AuthenticationMethod</key>
                <string>None</string>
                <key>ExtendedAuthEnabled</key>
                <true/>
                <key>AuthName</key>
                <string>{{USERNAME}}</string>
                <key>AuthPassword</key>
                <string>{{PASSWORD}}</string>
                
                <!-- –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ -->
                <key>IKESecurityAssociationParameters</key>
                <dict>
                    <key>EncryptionAlgorithm</key>
                    <string>AES-256</string>
                    <key>IntegrityAlgorithm</key>
                    <string>SHA2-256</string>
                    <key>DiffieHellmanGroup</key>
                    <integer>14</integer>
                </dict>
                <key>ChildSecurityAssociationParameters</key>
                <dict>
                    <key>EncryptionAlgorithm</key>
                    <string>AES-256</string>
                    <key>IntegrityAlgorithm</key>
                    <string>SHA2-256</string>
                    <key>DiffieHellmanGroup</key>
                    <integer>14</integer>
                </dict>
                
                <!-- Split Tunnel: —É–∫–∞–∑—ã–≤–∞–µ–º –ö–ê–ö–ò–ï –º–∞—Ä—à—Ä—É—Ç—ã —á–µ—Ä–µ–∑ VPN -->
                <key>EnablePFS</key>
                <true/>
                
                <!-- IMPORTANT: This disables default route through VPN -->
                <key>NETunnelIPv4</key>
                <dict>
                    <key>IncludedRoutes</key>
                    <array>
                        <!-- –ú–∞—Ä—à—Ä—É—Ç—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                        <dict>
                            <key>Address</key>
                            <string>104.18.0.0</string>
                            <key>SubnetMask</key>
                            <string>255.255.0.0</string>
                        </dict>
                        <dict>
                            <key>Address</key>
                            <string>142.250.0.0</string>
                            <key>SubnetMask</key>
                            <string>255.254.0.0</string>
                        </dict>
                        <!-- ... –µ—â—ë –º–∞—Ä—à—Ä—É—Ç—ã ... -->
                    </array>
                </dict>
            </dict>
            
            <!-- On Demand: –∞–≤—Ç–æ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ -->
            <key>OnDemandEnabled</key>
            <integer>1</integer>
            <key>OnDemandRules</key>
            <array>
                <dict>
                    <key>Action</key>
                    <string>Connect</string>
                </dict>
            </array>
        </dict>
    </array>
    
    <!-- Profile Metadata -->
    <key>PayloadDisplayName</key>
    <string>ProxyGate VPN ‚Äî {{CLIENT_NAME}}</string>
    <key>PayloadIdentifier</key>
    <string>com.proxygate.profile.{{CLIENT_ID}}</string>
    <key>PayloadOrganization</key>
    <string>ProxyGate</string>
    <key>PayloadType</key>
    <string>Configuration</string>
    <key>PayloadUUID</key>
    <string>{{PROFILE_UUID}}</string>
    <key>PayloadVersion</key>
    <integer>1</integer>
    <key>PayloadRemovalDisallowed</key>
    <false/>
</dict>
</plist>
```

### 7.3 strongSwan —Å–µ—Ä–≤–µ—Ä–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥

```
# /etc/swanctl/conf.d/connections.conf
# –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è ProxyGate ‚Äî –Ω–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é!

connections {
    proxygate {
        version = 2
        proposals = aes256-sha256-modp2048,aes128-sha256-modp2048
        rekey_time = 0s
        unique = replace
        pools = client_pool
        fragmentation = yes
        dpd_delay = 30s
        send_certreq = no
        
        local {
            auth = pubkey
            certs = fullchain.pem
            id = vpn.yourdomain.com
        }
        
        remote {
            auth = eap-mschapv2
            eap_id = %any
        }
        
        children {
            proxygate-net {
                local_ts = 0.0.0.0/0
                esp_proposals = aes256-sha256,aes128-sha256
                dpd_action = clear
                rekey_time = 0s
            }
        }
    }
}

pools {
    client_pool {
        addrs = 10.0.0.0/24
        dns = 1.1.1.1, 8.8.8.8
    }
}
```

```
# /etc/swanctl/conf.d/secrets.conf
# –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è ProxyGate ‚Äî –Ω–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é!

secrets {
    private-server {
        file = privkey.pem
    }
    
    eap-client_001 {
        id = client_001
        secret = "xK9mP2vL8nQ5wR3j"
    }
    
    eap-client_002 {
        id = client_002
        secret = "hT6yN4bF1cZ7dA9s"
    }
    
    # –î–æ–±–∞–≤–ª—è—é—Ç—Å—è/—É–¥–∞–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞–º–∏
}
```

### 7.4 3proxy –∫–æ–Ω—Ñ–∏–≥ (–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

```
# === 3proxy config ‚Äî –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è ProxyGate ===

nserver 1.1.1.1
nserver 8.8.8.8
nscache 65536
timeouts 1 5 30 60 180 1800 15 60

log /var/log/3proxy/3proxy.log D
logformat "L%d-%m-%Y %H:%M:%S %U %C:%c %R:%r %O %I %T"
rotate 30

auth strong
users $/etc/3proxy/passwd

# === Per-client ACL ===

# client_001 (–ò–≤–∞–Ω–æ–≤) ‚Äî AI + Google
allow client_001 * * openai.com,chat.openai.com,chatgpt.com *
allow client_001 * * claude.ai,anthropic.com *
allow client_001 * * google.com,googleapis.com,gstatic.com *
allow client_001 * * youtube.com,googlevideo.com,ytimg.com *

# client_002 (–ü–µ—Ç—Ä–æ–≤) ‚Äî –°—Ç—Ä–∏–º–∏–Ω–≥ + –°–æ—Ü—Å–µ—Ç–∏
allow client_002 * * netflix.com,nflxvideo.net,nflximg.net *
allow client_002 * * instagram.com,cdninstagram.com *

# === –ó–ê–ü–†–ï–¢ –û–°–¢–ê–õ–¨–ù–û–ì–û ===
deny *

# === –°–µ—Ä–≤–µ—Ä—ã ===
proxy -p3128 -a
socks -p1080 -a
```

### 7.5 PAC-—Ñ–∞–π–ª –∫–ª–∏–µ–Ω—Ç–∞

```javascript
// PAC: client_001 (–ò–≤–∞–Ω–æ–≤) ‚Äî Generated by ProxyGate
function FindProxyForURL(url, host) {
    var domains = [
        ".openai.com", ".chatgpt.com", ".oaiusercontent.com",
        ".claude.ai", ".anthropic.com",
        ".google.com", ".googleapis.com", ".gstatic.com", ".googleusercontent.com",
        ".youtube.com", ".googlevideo.com", ".ytimg.com"
    ];
    for (var i = 0; i < domains.length; i++) {
        if (dnsDomainIs(host, domains[i]) || host === domains[i].substring(1)) {
            return "PROXY 51.xx.xx.xx:3128; DIRECT";
        }
    }
    return "DIRECT";
}
```

---

## 8. FRONTEND ‚Äî –°–¢–†–ê–ù–ò–¶–´

### ‚ïê‚ïê‚ïê ADMIN PANEL (`/admin/...`) ‚ïê‚ïê‚ïê

### 8.1 Admin Login (`/admin/login`)
- username + password + optional TOTP
- JWT (type=admin) ‚Üí localStorage

### 8.2 Dashboard (`/admin/`)
- –ö–∞—Ä—Ç–æ—á–∫–∏: –≤—Å–µ–≥–æ / –∞–∫—Ç–∏–≤–Ω—ã—Ö / –Ω–µ–æ–ø–ª–∞—á–µ–Ω–Ω—ã—Ö / –æ–Ω–ª–∞–π–Ω
- –ö–∞—Ä—Ç–æ—á–∫–∞ ¬´–ó–∞–ø—Ä–æ—Å—ã –Ω–∞ –¥–æ–º–µ–Ω—ã¬ª ‚Äî –∫–æ–ª-–≤–æ pending –∑–∞–ø—Ä–æ—Å–æ–≤ –æ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤
- –°–ø–∏—Å–æ–∫ ¬´–°–∫–æ—Ä–æ –∏—Å—Ç–µ–∫–∞–µ—Ç –æ–ø–ª–∞—Ç–∞¬ª (‚â§ 7 –¥–Ω–µ–π)
- –°–ø–∏—Å–æ–∫ ¬´–ü—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ¬ª
- –ü–æ—Å–ª–µ–¥–Ω–∏–µ 5 –∫–ª–∏–µ–Ω—Ç–æ–≤

### 8.3 –ö–ª–∏–µ–Ω—Ç—ã (`/admin/clients`)
- –¢–∞–±–ª–∏—Ü–∞: –∏–º—è, —Å—Ç–∞—Ç—É—Å üü¢/üî¥, —Ç–∏–ø (VPN/Proxy/–û–±–∞), –æ–ø–ª–∞—Ç–∞ –¥–æ, –¥–æ–º–µ–Ω–æ–≤
- –§–∏–ª—å—Ç—Ä—ã: —Å—Ç–∞—Ç—É—Å, —Ç–∏–ø, –ø–æ–∏—Å–∫
- –ö–Ω–æ–ø–∫–∞ ¬´+ –ù–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç¬ª ‚Üí –º–æ–¥–∞–ª–∫–∞
- ¬´–ë—ã—Å—Ç—Ä–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ¬ª (–∏–º—è ‚Üí –≤—Å—ë –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

### 8.4 –ö–∞—Ä—Ç–æ—á–∫–∞ –∫–ª–∏–µ–Ω—Ç–∞ (`/admin/clients/:id`)

**–ó–∞–≥–æ–ª–æ–≤–æ–∫:** –∏–º—è, —Å—Ç–∞—Ç—É—Å, –∫–Ω–æ–ø–∫–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏/–¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏–∏, —Å—Å—ã–ª–∫–∞ –Ω–∞ –õ–ö –∫–ª–∏–µ–Ω—Ç–∞ (–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å)

**–¢–∞–± ¬´–ü—Ä–æ—Ñ–∏–ª–∏¬ª:**
- 4 –∫–Ω–æ–ø–∫–∏: ü™ü Windows (.ps1), üçé iPhone (.mobileconfig), üçè macOS (.mobileconfig), ü§ñ Android (.sswan)
- –°—Å—ã–ª–∫–∞ –Ω–∞ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –∫–ª–∏–µ–Ω—Ç–∞ (–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ)
- –ö–Ω–æ–ø–∫–∞ ¬´–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ Telegram¬ª
- Proxy-–¥–∞–Ω–Ω—ã–µ: —Ö–æ—Å—Ç:–ø–æ—Ä—Ç, –ª–æ–≥–∏–Ω, –ø–∞—Ä–æ–ª—å, PAC-—Å—Å—ã–ª–∫–∞

**–¢–∞–± ¬´–î–æ–º–µ–Ω—ã¬ª:**
- –¢–∞–±–ª–∏—Ü–∞: –¥–æ–º–µ–Ω, —Å –ø–æ–¥–¥–æ–º–µ–Ω–∞–º–∏?, –¥–∞—Ç–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è, ‚úï
- Input ¬´–î–æ–±–∞–≤–∏—Ç—å –¥–æ–º–µ–Ω¬ª (autocomplete + Enter)
- Dropdown ¬´–ü—Ä–∏–º–µ–Ω–∏—Ç—å —à–∞–±–ª–æ–Ω¬ª (—á–µ–∫–±–æ–∫—Å—ã: AI, –°—Ç—Ä–∏–º–∏–Ω–≥, –°–æ—Ü—Å–µ—Ç–∏...)
- –ö–Ω–æ–ø–∫–∞ ¬´–ü–µ—Ä–µ—Ä–µ–∑–æ–ª–≤–∏—Ç—å DNS¬ª
- –°—á—ë—Ç—á–∏–∫ –º–∞—Ä—à—Ä—É—Ç–æ–≤: ¬´12 CIDR-–º–∞—Ä—à—Ä—É—Ç–æ–≤ –¥–ª—è 8 –¥–æ–º–µ–Ω–æ–≤¬ª

**–¢–∞–± ¬´–ü–ª–∞—Ç–µ–∂–∏¬ª:**
- –¢–∞–±–ª–∏—Ü–∞: –¥–∞—Ç–∞, —Å—É–º–º–∞, –ø–µ—Ä–∏–æ–¥, —Å—Ç–∞—Ç—É—Å (üü¢ –æ–ø–ª–∞—á–µ–Ω / üî¥ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω)
- –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å: ¬´–û–ø–ª–∞—á–µ–Ω–æ –¥–æ 15.03.2026¬ª –∏–ª–∏ ¬´–ù–µ –æ–ø–ª–∞—á–µ–Ω–æ!¬ª
- –ö–Ω–æ–ø–∫–∞ ¬´+ –ù–æ–≤—ã–π –ø–ª–∞—Ç—ë–∂¬ª

**–¢–∞–± ¬´–ù–∞—Å—Ç—Ä–æ–π–∫–∏¬ª:**
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª–µ–π (–∏–º—è, email, —Ç–µ–ª–µ—Ñ–æ–Ω, telegram)
- –¢–∏–ø —Å–µ—Ä–≤–∏—Å–∞ (select: VPN / Proxy / –û–±–∞)
- –°–±—Ä–æ—Å VPN-–ø–∞—Ä–æ–ª—è / Proxy-–ø–∞—Ä–æ–ª—è / –ü–∞—Ä–æ–ª—è –õ–ö
- –£–¥–∞–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞ (confirm dialog)

### 8.5 –ó–∞–ø—Ä–æ—Å—ã –Ω–∞ –¥–æ–º–µ–Ω—ã (`/admin/domain-requests`)
- –¢–∞–±–ª–∏—Ü–∞: –∫–ª–∏–µ–Ω—Ç, –¥–æ–º–µ–Ω, –ø—Ä–∏—á–∏–Ω–∞, –¥–∞—Ç–∞, —Å—Ç–∞—Ç—É—Å (pending/approved/rejected)
- –§–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî pending)
- –ö–Ω–æ–ø–∫–∏ ¬´‚úÖ –û–¥–æ–±—Ä–∏—Ç—å¬ª / ¬´‚ùå –û—Ç–∫–ª–æ–Ω–∏—Ç—å¬ª (—Å –º–æ–¥–∞–ª–∫–æ–π –¥–ª—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è)
- –ü—Ä–∏ –æ–¥–æ–±—Ä–µ–Ω–∏–∏ ‚Üí –¥–æ–º–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫–ª–∏–µ–Ω—Ç—É

### 8.6 –®–∞–±–ª–æ–Ω—ã (`/admin/templates`)
- –ö–∞—Ä—Ç–æ—á–∫–∏ —à–∞–±–ª–æ–Ω–æ–≤ (–∏–∫–æ–Ω–∫–∞ + –Ω–∞–∑–≤–∞–Ω–∏–µ + –∫–æ–ª-–≤–æ –¥–æ–º–µ–Ω–æ–≤)
- –°–æ–∑–¥–∞–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞ (–∏–º—è, –∏–∫–æ–Ω–∫–∞, —Å–ø–∏—Å–æ–∫ –¥–æ–º–µ–Ω–æ–≤)

### 8.7 –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (`/admin/settings`)
- VPS IP, –¥–æ–º–µ–Ω
- Telegram bot token, admin chat ID
- –ü–æ—Ä—Ç—ã (IKEv2, proxy)
- –°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è –∞–¥–º–∏–Ω–∞

---

### ‚ïê‚ïê‚ïê –õ–ò–ß–ù–´–ô –ö–ê–ë–ò–ù–ï–¢ –ö–õ–ò–ï–ù–¢–ê (`/my/...`) ‚ïê‚ïê‚ïê

–û—Ç–¥–µ–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å ‚Äî –ª–∞–∫–æ–Ω–∏—á–Ω—ã–π, –º–æ–±–∏–ª—å–Ω–æ-–∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π, –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ.
–ö–ª–∏–µ–Ω—Ç –ª–æ–≥–∏–Ω–∏—Ç—Å—è –ø–æ VPN-–ª–æ–≥–∏–Ω—É + –ø–∞—Ä–æ–ª—é –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞.

### 8.8 –í—Ö–æ–¥ –∫–ª–∏–µ–Ω—Ç–∞ (`/my/login`)
- –ü–æ–ª–µ ¬´–õ–æ–≥–∏–Ω¬ª (= VPN-username, –Ω–∞–ø—Ä–∏–º–µ—Ä client_001)
- –ü–æ–ª–µ ¬´–ü–∞—Ä–æ–ª—å¬ª (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é = VPN-–ø–∞—Ä–æ–ª—å, –º–æ–∂–Ω–æ —Å–º–µ–Ω–∏—Ç—å)
- JWT (type=client) ‚Üí localStorage
- –°—Å—ã–ª–∫–∞ ¬´–ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å? –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É¬ª
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –¥–∏–∑–∞–π–Ω, –ª–æ–≥–æ—Ç–∏–ø ProxyGate

### 8.9 –ì–ª–∞–≤–Ω–∞—è –∫–∞–±–∏–Ω–µ—Ç–∞ (`/my/`)
–ü–µ—Ä–≤–æ–µ —á—Ç–æ –≤–∏–¥–∏—Ç –∫–ª–∏–µ–Ω—Ç –ø–æ—Å–ª–µ –≤—Ö–æ–¥–∞ ‚Äî —Å—Ç–∞—Ç—É—Å –∏ –±—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è.

```
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë                                                   ‚ïë
‚ïë  üîê ProxyGate                          [–í—ã–π—Ç–∏]   ‚ïë
‚ïë                                                   ‚ïë
‚ïë  –ü—Ä–∏–≤–µ—Ç, –ò–≤–∞–Ω!                                    ‚ïë
‚ïë                                                   ‚ïë
‚ïë  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚ïë
‚ïë  ‚îÇ  ‚úÖ –ü–æ–¥–ø–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞                        ‚îÇ  ‚ïë
‚ïë  ‚îÇ  –î–µ–π—Å—Ç–≤—É–µ—Ç –¥–æ: 15 –º–∞—Ä—Ç–∞ 2026                ‚îÇ  ‚ïë
‚ïë  ‚îÇ  –û—Å—Ç–∞–ª–æ—Å—å: 40 –¥–Ω–µ–π                          ‚îÇ  ‚ïë
‚ïë  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚ïë
‚ïë                                                   ‚ïë
‚ïë  ‚îÄ‚îÄ –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è ‚îÄ‚îÄ                          ‚ïë
‚ïë                                                   ‚ïë
‚ïë  üì± –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ    ‚Üí                     ‚ïë
‚ïë  üåê –ú–æ–∏ —Å–∞–π—Ç—ã (12)         ‚Üí                     ‚ïë
‚ïë  üí≥ –ò—Å—Ç–æ—Ä–∏—è –ø–ª–∞—Ç–µ–∂–µ–π        ‚Üí                     ‚ïë
‚ïë  ‚öôÔ∏è  –°–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å          ‚Üí                     ‚ïë
‚ïë                                                   ‚ïë
‚ïë  ‚îÄ‚îÄ –ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å? ‚îÄ‚îÄ                              ‚ïë
‚ïë  üìñ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ                       ‚ïë
‚ïë  üí¨ –ù–∞–ø–∏—Å–∞—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É: @admin               ‚ïë
‚ïë                                                   ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
```

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- **StatusCard** ‚Äî –±–æ–ª—å—à–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º –ø–æ–¥–ø–∏—Å–∫–∏ (üü¢ –∞–∫—Ç–∏–≤–Ω–∞ / üü° –∏—Å—Ç–µ–∫–∞–µ—Ç —á–µ—Ä–µ–∑ N –¥–Ω–µ–π / üî¥ –Ω–µ –æ–ø–ª–∞—á–µ–Ω–∞)
- **QuickActions** ‚Äî 4 –∫–Ω–æ–ø–∫–∏-—Å—Å—ã–ª–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã
- **HelpSection** ‚Äî –∫–æ–Ω—Ç–∞–∫—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

### 8.10 –ú–æ–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (`/my/devices`)
–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞ ‚Äî —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–µ–π VPN/Proxy –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞.

```
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë  ‚Üê –ù–∞–∑–∞–¥         –ú–æ–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞                  ‚ïë
‚ïë                                                   ‚ïë
‚ïë  –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∏ —Å–∫–∞—á–∞–π—Ç–µ –ø—Ä–æ—Ñ–∏–ª—å      ‚ïë
‚ïë  –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ VPN.                ‚ïë
‚ïë                                                   ‚ïë
‚ïë  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚ïë
‚ïë  ‚îÇ  üì± iPhone / iPad                            ‚îÇ  ‚ïë
‚ïë  ‚îÇ                                              ‚îÇ  ‚ïë
‚ïë  ‚îÇ  –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ ‚Äî –Ω–∏—á–µ–≥–æ            ‚îÇ  ‚ïë
‚ïë  ‚îÇ  —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –Ω–µ –Ω—É–∂–Ω–æ!                      ‚îÇ  ‚ïë
‚ïë  ‚îÇ                                              ‚îÇ  ‚ïë
‚ïë  ‚îÇ  [  ‚¨á –°–∫–∞—á–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å .mobileconfig  ]       ‚îÇ  ‚ïë
‚ïë  ‚îÇ                                              ‚îÇ  ‚ïë
‚ïë  ‚îÇ  ‚ñ∏ –ö–∞–∫ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å (—Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å)               ‚îÇ  ‚ïë
‚ïë  ‚îÇ    1. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É —Å–∫–∞—á–∞—Ç—å (–≤ Safari)       ‚îÇ  ‚ïë
‚ïë  ‚îÇ    2. –û—Ç–∫—Ä–æ–π—Ç–µ ¬´–ù–∞—Å—Ç—Ä–æ–π–∫–∏¬ª                    ‚îÇ  ‚ïë
‚ïë  ‚îÇ    3. –í–≤–µ—Ä—Ö—É –ø–æ—è–≤–∏—Ç—Å—è ¬´–ü—Ä–æ—Ñ–∏–ª—å –∑–∞–≥—Ä—É–∂–µ–Ω¬ª      ‚îÇ  ‚ïë
‚ïë  ‚îÇ    4. –ù–∞–∂–º–∏—Ç–µ ¬´–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å¬ª                    ‚îÇ  ‚ïë
‚ïë  ‚îÇ    5. –ì–æ—Ç–æ–≤–æ! VPN –≤–∫–ª—é—á–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏      ‚îÇ  ‚ïë
‚ïë  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚ïë
‚ïë                                                   ‚ïë
‚ïë  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚ïë
‚ïë  ‚îÇ  ü§ñ Android                                   ‚îÇ  ‚ïë
‚ïë  ‚îÇ                                              ‚îÇ  ‚ïë
‚ïë  ‚îÇ  –ù—É–∂–Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ strongSwan (–±–µ—Å–ø–ª–∞—Ç–Ω–æ–µ)     ‚îÇ  ‚ïë
‚ïë  ‚îÇ                                              ‚îÇ  ‚ïë
‚ïë  ‚îÇ  [ ‚¨á –°–∫–∞—á–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å .sswan ]                ‚îÇ  ‚ïë
‚ïë  ‚îÇ  [ üì• –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å strongSwan (Play Store) ]    ‚îÇ  ‚ïë
‚ïë  ‚îÇ                                              ‚îÇ  ‚ïë
‚ïë  ‚îÇ  ‚ñ∏ –ö–∞–∫ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å (—Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å)               ‚îÇ  ‚ïë
‚ïë  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚ïë
‚ïë                                                   ‚ïë
‚ïë  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚ïë
‚ïë  ‚îÇ  ü™ü Windows 10/11                             ‚îÇ  ‚ïë
‚ïë  ‚îÇ                                              ‚îÇ  ‚ïë
‚ïë  ‚îÇ  –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ ‚Äî –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç  ‚îÇ  ‚ïë
‚ïë  ‚îÇ                                              ‚îÇ  ‚ïë
‚ïë  ‚îÇ  [ ‚¨á –°–∫–∞—á–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ .ps1 ]         ‚îÇ  ‚ïë
‚ïë  ‚îÇ                                              ‚îÇ  ‚ïë
‚ïë  ‚îÇ  ‚ñ∏ –ö–∞–∫ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å (—Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å)               ‚îÇ  ‚ïë
‚ïë  ‚îÇ    1. –°–∫–∞—á–∞–π—Ç–µ —Ñ–∞–π–ª                           ‚îÇ  ‚ïë
‚ïë  ‚îÇ    2. –ü—Ä–∞–≤—ã–π –∫–ª–∏–∫ ‚Üí –ó–∞–ø—É—Å–∫ –æ—Ç –∏–º–µ–Ω–∏ –∞–¥–º–∏–Ω–∞    ‚îÇ  ‚ïë
‚ïë  ‚îÇ    3. –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–∞             ‚îÇ  ‚ïë
‚ïë  ‚îÇ    4. –û—Ç–∫—Ä–æ–π—Ç–µ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –°–µ—Ç—å ‚Üí VPN          ‚îÇ  ‚ïë
‚ïë  ‚îÇ    5. –ù–∞–∂–º–∏—Ç–µ ¬´ProxyGate VPN¬ª ‚Üí –ü–æ–¥–∫–ª—é—á–∏—Ç—å    ‚îÇ  ‚ïë
‚ïë  ‚îÇ    6. –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å (—Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º —Ä–∞–∑–µ)  ‚îÇ  ‚ïë
‚ïë  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚ïë
‚ïë                                                   ‚ïë
‚ïë  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚ïë
‚ïë  ‚îÇ  üçè macOS                                     ‚îÇ  ‚ïë
‚ïë  ‚îÇ  [ ‚¨á –°–∫–∞—á–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å .mobileconfig ]         ‚îÇ  ‚ïë
‚ïë  ‚îÇ  ‚ñ∏ –ö–∞–∫ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å (—Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å)               ‚îÇ  ‚ïë
‚ïë  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚ïë
‚ïë                                                   ‚ïë
‚ïë  ‚îÄ‚îÄ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –ü—Ä–æ–∫—Å–∏ (–¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞) ‚îÄ‚îÄ       ‚ïë
‚ïë                                                   ‚ïë
‚ïë  –ï—Å–ª–∏ VPN –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç, –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–æ–∫—Å–∏:          ‚ïë
‚ïë  –ê–¥—Ä–µ—Å: 51.xx.xx.xx                              ‚ïë
‚ïë  HTTP-–ø–æ—Ä—Ç: 3128  |  SOCKS5-–ø–æ—Ä—Ç: 1080           ‚ïë
‚ïë  –õ–æ–≥–∏–Ω: client_001                               ‚ïë
‚ïë  –ü–∞—Ä–æ–ª—å: xxxxxxxx  [üëÅ –ø–æ–∫–∞–∑–∞—Ç—å] [üìã –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å]  ‚ïë
‚ïë                                                   ‚ïë
‚ïë  [ ‚¨á –°–∫–∞—á–∞—Ç—å PAC-—Ñ–∞–π–ª ]                          ‚ïë
‚ïë  PAC ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –Ω—É–∂–Ω—ã–µ —Å–∞–π—Ç—ã      ‚ïë
‚ïë  —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏, –æ—Å—Ç–∞–ª—å–Ω–æ–µ ‚Äî –Ω–∞–ø—Ä—è–º—É—é.              ‚ïë
‚ïë                                                   ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
```

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- **DeviceCard** ‚Äî –∫–∞—Ä—Ç–æ—á–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (–∏–∫–æ–Ω–∫–∞, –Ω–∞–∑–≤–∞–Ω–∏–µ, –æ–ø–∏—Å–∞–Ω–∏–µ, –∫–Ω–æ–ø–∫–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è, —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ–º–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è)
- **SetupGuide** ‚Äî –ø–æ—à–∞–≥–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ (accordion, —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞—é—Ç—Å—è –ø–æ –∫–ª–∏–∫—É)
- **ProxyCredentials** ‚Äî –±–ª–æ–∫ —Å –¥–∞–Ω–Ω—ã–º–∏ –ø—Ä–æ–∫—Å–∏ (—Å –∫–Ω–æ–ø–∫–∞–º–∏ ¬´–ü–æ–∫–∞–∑–∞—Ç—å –ø–∞—Ä–æ–ª—å¬ª –∏ ¬´–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å¬ª)

### 8.11 –ú–æ–∏ —Å–∞–π—Ç—ã (`/my/domains`)
–ö–ª–∏–µ–Ω—Ç –≤–∏–¥–∏—Ç —Å–≤–æ–π —Å–ø–∏—Å–æ–∫ –¥–æ–º–µ–Ω–æ–≤ (read-only) –∏ –º–æ–∂–µ—Ç –∑–∞–ø—Ä–æ—Å–∏—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ.

```
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë  ‚Üê –ù–∞–∑–∞–¥            –ú–æ–∏ —Å–∞–π—Ç—ã                    ‚ïë
‚ïë                                                   ‚ïë
‚ïë  –ß–µ—Ä–µ–∑ VPN/–ø—Ä–æ–∫—Å–∏ –¥–æ—Å—Ç—É–ø–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ —Å–∞–π—Ç—ã:       ‚ïë
‚ïë                                                   ‚ïë
‚ïë  ü§ñ AI –°–µ—Ä–≤–∏—Å—ã                                    ‚ïë
‚ïë  ‚îú‚îÄ‚îÄ openai.com       (+ –ø–æ–¥–¥–æ–º–µ–Ω—ã)               ‚ïë
‚ïë  ‚îú‚îÄ‚îÄ chatgpt.com      (+ –ø–æ–¥–¥–æ–º–µ–Ω—ã)               ‚ïë
‚ïë  ‚îú‚îÄ‚îÄ claude.ai        (+ –ø–æ–¥–¥–æ–º–µ–Ω—ã)               ‚ïë
‚ïë  ‚îî‚îÄ‚îÄ anthropic.com    (+ –ø–æ–¥–¥–æ–º–µ–Ω—ã)               ‚ïë
‚ïë                                                   ‚ïë
‚ïë  üîç Google –°–µ—Ä–≤–∏—Å—ã                                ‚ïë
‚ïë  ‚îú‚îÄ‚îÄ google.com       (+ –ø–æ–¥–¥–æ–º–µ–Ω—ã)               ‚ïë
‚ïë  ‚îú‚îÄ‚îÄ youtube.com      (+ –ø–æ–¥–¥–æ–º–µ–Ω—ã)               ‚ïë
‚ïë  ‚îú‚îÄ‚îÄ gmail.com        (+ –ø–æ–¥–¥–æ–º–µ–Ω—ã)               ‚ïë
‚ïë  ‚îî‚îÄ‚îÄ googleapis.com   (+ –ø–æ–¥–¥–æ–º–µ–Ω—ã)               ‚ïë
‚ïë                                                   ‚ïë
‚ïë  üì± –°–æ—Ü—Å–µ—Ç–∏                                       ‚ïë
‚ïë  ‚îú‚îÄ‚îÄ instagram.com    (+ –ø–æ–¥–¥–æ–º–µ–Ω—ã)               ‚ïë
‚ïë  ‚îî‚îÄ‚îÄ twitter.com      (+ –ø–æ–¥–¥–æ–º–µ–Ω—ã)               ‚ïë
‚ïë                                                   ‚ïë
‚ïë  üì¶ –î—Ä—É–≥–æ–µ                                        ‚ïë
‚ïë  ‚îî‚îÄ‚îÄ custom-site.com  (+ –ø–æ–¥–¥–æ–º–µ–Ω—ã)               ‚ïë
‚ïë                                                   ‚ïë
‚ïë  ‚îÄ‚îÄ –ù—É–∂–µ–Ω –µ—â—ë —Å–∞–π—Ç? ‚îÄ‚îÄ                           ‚ïë
‚ïë                                                   ‚ïë
‚ïë  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚ïë
‚ïë  ‚îÇ  –î–æ–º–µ–Ω: [ newsite.com                    ]   ‚îÇ  ‚ïë
‚ïë  ‚îÇ  –ó–∞—á–µ–º: [ –ù—É–∂–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏   ]   ‚îÇ  ‚ïë
‚ïë  ‚îÇ                                              ‚îÇ  ‚ïë
‚ïë  ‚îÇ  [ üì© –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å ]                      ‚îÇ  ‚ïë
‚ïë  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚ïë
‚ïë                                                   ‚ïë
‚ïë  ‚îÄ‚îÄ –ú–æ–∏ –∑–∞–ø—Ä–æ—Å—ã ‚îÄ‚îÄ                                ‚ïë
‚ïë  ‚úÖ oldsite.com ‚Äî –æ–¥–æ–±—Ä–µ–Ω 28.01.2026              ‚ïë
‚ïë  ‚è≥ newsite.com ‚Äî –Ω–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏                 ‚ïë
‚ïë  ‚ùå badsite.com ‚Äî –æ—Ç–∫–ª–æ–Ω—ë–Ω (–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∞–¥–º–∏–Ω–∞)   ‚ïë
‚ïë                                                   ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
```

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- **DomainList** ‚Äî —Å–ø–∏—Å–æ–∫ –¥–æ–º–µ–Ω–æ–≤, —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ —à–∞–±–ª–æ–Ω—É (AI, Google, –°–æ—Ü—Å–µ—Ç–∏, –î—Ä—É–≥–æ–µ)
- **DomainRequestForm** ‚Äî —Ñ–æ—Ä–º–∞ –∑–∞–ø—Ä–æ—Å–∞ –Ω–æ–≤–æ–≥–æ –¥–æ–º–µ–Ω–∞ (–ø–æ–ª–µ –¥–æ–º–µ–Ω–∞ + –ø—Ä–∏—á–∏–Ω–∞)
- **RequestHistory** ‚Äî —Å–ø–∏—Å–æ–∫ –ø—Ä–æ—à–ª—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ —Å–æ —Å—Ç–∞—Ç—É—Å–∞–º–∏

### 8.12 –ú–æ–∏ –ø–ª–∞—Ç–µ–∂–∏ (`/my/payments`)
Read-only –∏—Å—Ç–æ—Ä–∏—è –ø–ª–∞—Ç–µ–∂–µ–π.

```
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë  ‚Üê –ù–∞–∑–∞–¥           –ú–æ–∏ –ø–ª–∞—Ç–µ–∂–∏                   ‚ïë
‚ïë                                                   ‚ïë
‚ïë  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚ïë
‚ïë  ‚îÇ  ‚úÖ –ü–æ–¥–ø–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞ –¥–æ 15 –º–∞—Ä—Ç–∞ 2026       ‚îÇ  ‚ïë
‚ïë  ‚îÇ  –û—Å—Ç–∞–ª–æ—Å—å: 40 –¥–Ω–µ–π                          ‚îÇ  ‚ïë
‚ïë  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚ïë
‚ïë                                                   ‚ïë
‚ïë  ‚îÄ‚îÄ –ò—Å—Ç–æ—Ä–∏—è ‚îÄ‚îÄ                                    ‚ïë
‚ïë                                                   ‚ïë
‚ïë  01.02.2026   500 ‚ÇΩ   01.02 ‚Äî 15.03.2026  üü¢     ‚ïë
‚ïë  01.01.2026   500 ‚ÇΩ   01.01 ‚Äî 31.01.2026  ‚úÖ     ‚ïë
‚ïë  01.12.2025   500 ‚ÇΩ   01.12 ‚Äî 31.12.2025  ‚úÖ     ‚ïë
‚ïë                                                   ‚ïë
‚ïë  –ü–æ –≤–æ–ø—Ä–æ—Å–∞–º –æ–ø–ª–∞—Ç—ã: @admin_telegram              ‚ïë
‚ïë                                                   ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
```

### 8.13 –°–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å (`/my/settings`)
- –°—Ç–∞—Ä—ã–π –ø–∞—Ä–æ–ª—å
- –ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å (2 —Ä–∞–∑–∞)
- –ö–Ω–æ–ø–∫–∞ ¬´–°–æ—Ö—Ä–∞–Ω–∏—Ç—å¬ª
- –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: ¬´–≠—Ç–æ –ø–∞—Ä–æ–ª—å –¥–ª—è –≤—Ö–æ–¥–∞ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç. VPN-–ø–∞—Ä–æ–ª—å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º.¬ª

---

### ‚ïê‚ïê‚ïê –ü–£–ë–õ–ò–ß–ù–ê–Ø –°–¢–†–ê–ù–ò–¶–ê (`/connect/{token}`) ‚ïê‚ïê‚ïê

### 8.14 –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –±–µ–∑ –ª–æ–≥–∏–Ω–∞

–û—Å—Ç–∞—ë—Ç—Å—è –∫–∞–∫ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± ‚Äî –ø–æ —Å–µ–∫—Ä–µ—Ç–Ω–æ–π —Å—Å—ã–ª–∫–µ –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.
–î–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ ¬´–í–æ–π—Ç–∏ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç¬ª –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞.

```
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë  üîê ProxyGate                                     ‚ïë
‚ïë  –í–∞—à –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π VPN-–¥–æ—Å—Ç—É–ø                      ‚ïë
‚ïë                                                   ‚ïë
‚ïë  –ü—Ä–∏–≤–µ—Ç, –ò–≤–∞–Ω!                                    ‚ïë
‚ïë  –°—Ç–∞—Ç—É—Å: üü¢ –ê–∫—Ç–∏–≤–µ–Ω –¥–æ 15.03.2026                ‚ïë
‚ïë                                                   ‚ïë
‚ïë  [ üîë –í–æ–π—Ç–∏ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç ]                    ‚ïë
‚ïë                                                   ‚ïë
‚ïë  ‚îÄ‚îÄ‚îÄ –ë—ã—Å—Ç—Ä–æ–µ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ ‚îÄ‚îÄ‚îÄ                      ‚ïë
‚ïë  üì± iPhone    [ ‚¨á .mobileconfig ]                 ‚ïë
‚ïë  ü§ñ Android   [ ‚¨á .sswan ]                        ‚ïë
‚ïë  ü™ü Windows   [ ‚¨á .ps1 ]                          ‚ïë
‚ïë  üçè macOS     [ ‚¨á .mobileconfig ]                 ‚ïë
‚ïë                                                   ‚ïë
‚ïë  ‚îÄ‚îÄ‚îÄ –ü—Ä–æ–∫—Å–∏ ‚îÄ‚îÄ‚îÄ                                   ‚ïë
‚ïë  –ê–¥—Ä–µ—Å: 51.xx.xx.xx:3128                          ‚ïë
‚ïë  –õ–æ–≥–∏–Ω: client_001 / –ü–∞—Ä–æ–ª—å: xxxxxxxx             ‚ïë
‚ïë  [ ‚¨á PAC-—Ñ–∞–π–ª ]                                   ‚ïë
‚ïë                                                   ‚ïë
‚ïë  –í–æ–ø—Ä–æ—Å—ã? @admin_telegram                          ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
```

---

## 9. –†–ê–ó–í–Å–†–¢–´–í–ê–ù–ò–ï VPS

### 9.1 setup_vps.sh ‚Äî –ø–æ–ª–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

```bash
#!/bin/bash
# ProxyGate ‚Äî Setup VPS (Ubuntu 24.04)
# –ó–∞–ø—É—Å–∫: sudo bash setup_vps.sh

set -e

echo "=== ProxyGate VPS Setup ==="

# 1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
apt update && apt upgrade -y

# 2. –ë–∞–∑–æ–≤—ã–µ –ø–∞–∫–µ—Ç—ã
apt install -y \
    strongswan strongswan-pki libcharon-extra-plugins libstrongswan-extra-plugins \
    nginx certbot python3-certbot-nginx \
    python3-pip python3-venv \
    git curl ufw fail2ban \
    build-essential  # –¥–ª—è —Å–±–æ—Ä–∫–∏ 3proxy

# 3. Firewall
ufw default deny incoming
ufw default allow outgoing
ufw allow ssh
ufw allow 443/tcp         # HTTPS
ufw allow 80/tcp          # HTTP (–¥–ª—è certbot)
ufw allow 500/udp         # IKEv2 (IKE)
ufw allow 4500/udp        # IKEv2 (NAT-T)
ufw allow 3128/tcp        # HTTP Proxy
ufw allow 1080/tcp        # SOCKS5
ufw --force enable

# 4. IP forwarding
cat >> /etc/sysctl.conf << 'EOF'
net.ipv4.ip_forward=1
net.ipv6.conf.all.forwarding=1
net.ipv4.conf.all.accept_redirects=0
net.ipv4.conf.all.send_redirects=0
EOF
sysctl -p

# 5. iptables –¥–ª—è NAT (VPN –∫–ª–∏–µ–Ω—Ç—ã ‚Üí –∏–Ω—Ç–µ—Ä–Ω–µ—Ç)
# –û–ø—Ä–µ–¥–µ–ª—è–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
IFACE=$(ip route | grep default | awk '{print $5}' | head -1)
iptables -t nat -A POSTROUTING -s 10.0.0.0/24 -o $IFACE -j MASQUERADE
iptables -A FORWARD -s 10.0.0.0/24 -j ACCEPT
iptables -A FORWARD -d 10.0.0.0/24 -j ACCEPT

# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å iptables
apt install -y iptables-persistent
netfilter-persistent save

# 6. Let's Encrypt —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
# –í–ê–ñ–ù–û: —Å–Ω–∞—á–∞–ª–∞ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å DNS A-–∑–∞–ø–∏—Å—å vpn.yourdomain.com ‚Üí IP —Å–µ—Ä–≤–µ—Ä–∞
# certbot --nginx -d vpn.yourdomain.com

# 7. strongSwan ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
# –°–∏–º–≤–æ–ª–∏—á–µ—Å–∫–∏–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ Let's Encrypt —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
ln -sf /etc/letsencrypt/live/vpn.yourdomain.com/fullchain.pem /etc/swanctl/x509/fullchain.pem
ln -sf /etc/letsencrypt/live/vpn.yourdomain.com/privkey.pem /etc/swanctl/private/privkey.pem
ln -sf /etc/letsencrypt/live/vpn.yourdomain.com/chain.pem /etc/swanctl/x509ca/chain.pem

# –°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –∫–æ–Ω—Ñ–∏–≥–æ–≤
mkdir -p /etc/swanctl/conf.d

# –ù–∞—á–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥ strongSwan
cat > /etc/swanctl/conf.d/connections.conf << 'EOF'
connections {
    proxygate {
        version = 2
        proposals = aes256-sha256-modp2048,aes128-sha256-modp2048
        rekey_time = 0s
        unique = replace
        pools = client_pool
        fragmentation = yes
        dpd_delay = 30s
        send_certreq = no

        local {
            auth = pubkey
            certs = fullchain.pem
            id = vpn.yourdomain.com
        }

        remote {
            auth = eap-mschapv2
            eap_id = %any
        }

        children {
            proxygate-net {
                local_ts = 0.0.0.0/0
                esp_proposals = aes256-sha256,aes128-sha256
                dpd_action = clear
                rekey_time = 0s
            }
        }
    }
}

pools {
    client_pool {
        addrs = 10.0.0.0/24
        dns = 1.1.1.1, 8.8.8.8
    }
}
EOF

cat > /etc/swanctl/conf.d/secrets.conf << 'EOF'
secrets {
    private-server {
        file = privkey.pem
    }
}
EOF

# –í–∫–ª—é—á–∏—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–ª–∞–≥–∏–Ω—ã –¥–ª—è EAP
# –í /etc/strongswan.d/charon/ –≤–∫–ª—é—á–∞–µ–º eap-mschapv2
systemctl restart strongswan-starter
swanctl --load-all

# 8. 3proxy ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤
cd /tmp
git clone https://github.com/3proxy/3proxy.git
cd 3proxy
ln -s Makefile.Linux Makefile
make -f Makefile.Linux
make -f Makefile.Linux install
mkdir -p /etc/3proxy /var/log/3proxy

# –ù–∞—á–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥ (–ø—É—Å—Ç–æ–π, –±–µ–∑ –∫–ª–∏–µ–Ω—Ç–æ–≤)
cat > /etc/3proxy/3proxy.cfg << 'EOF'
nserver 1.1.1.1
nserver 8.8.8.8
nscache 65536
timeouts 1 5 30 60 180 1800 15 60
log /var/log/3proxy/3proxy.log D
logformat "L%d-%m-%Y %H:%M:%S %U %C:%c %R:%r %O %I %T"
rotate 30
auth strong
users $/etc/3proxy/passwd
deny *
proxy -p3128 -a
socks -p1080 -a
EOF
touch /etc/3proxy/passwd

# systemd —Å–µ—Ä–≤–∏—Å –¥–ª—è 3proxy
cat > /etc/systemd/system/3proxy.service << 'EOF'
[Unit]
Description=3proxy Proxy Server
After=network.target

[Service]
Type=simple
ExecStart=/usr/local/bin/3proxy /etc/3proxy/3proxy.cfg
ExecReload=/bin/kill -HUP $MAINPID
Restart=on-failure
RestartSec=5

[Install]
WantedBy=multi-user.target
EOF
systemctl daemon-reload
systemctl enable 3proxy
systemctl start 3proxy

# 9. Python backend
mkdir -p /opt/proxygate
cd /opt/proxygate
python3 -m venv venv
# –î–∞–ª–µ–µ ‚Äî –¥–µ–ø–ª–æ–π backend —á–µ—Ä–µ–∑ git clone / scp

# 10. Certbot auto-renew —Ö—É–∫ (–æ–±–Ω–æ–≤–∏—Ç—å —Å–∏–º–ª–∏–Ω–∫–∏ strongSwan)
cat > /etc/letsencrypt/renewal-hooks/post/strongswan.sh << 'EOF'
#!/bin/bash
swanctl --load-creds
systemctl reload strongswan-starter
EOF
chmod +x /etc/letsencrypt/renewal-hooks/post/strongswan.sh

echo "=== Setup Complete ==="
echo "–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:"
echo "1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å DNS: vpn.yourdomain.com ‚Üí $(curl -s ifconfig.me)"
echo "2. –ü–æ–ª—É—á–∏—Ç—å SSL: certbot --nginx -d vpn.yourdomain.com"
echo "3. –ó–∞–¥–µ–ø–ª–æ–∏—Ç—å backend –∏ frontend"
echo "4. –ó–∞–ø—É—Å—Ç–∏—Ç—å: python init_db.py"
```

### 9.2 Nginx –∫–æ–Ω—Ñ–∏–≥

```nginx
server {
    listen 443 ssl http2;
    server_name vpn.yourdomain.com;

    ssl_certificate /etc/letsencrypt/live/vpn.yourdomain.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/vpn.yourdomain.com/privkey.pem;

    # Admin Panel (SPA)
    location / {
        root /opt/proxygate/frontend/dist;
        try_files $uri $uri/ /index.html;
    }

    # Backend API
    location /api/ {
        proxy_pass http://127.0.0.1:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    # –ü—É–±–ª–∏—á–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∫–ª–∏–µ–Ω—Ç–æ–≤
    location /connect/ {
        proxy_pass http://127.0.0.1:8000;
    }

    # –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–µ–π
    location /download/ {
        proxy_pass http://127.0.0.1:8000;
    }

    # PAC-—Ñ–∞–π–ª—ã
    location /pac/ {
        proxy_pass http://127.0.0.1:8000;
        add_header Content-Type "application/x-ns-proxy-autoconfig";
    }
}

server {
    listen 80;
    server_name vpn.yourdomain.com;
    return 301 https://$host$request_uri;
}
```

### 9.3 .env

```bash
# Server
VPS_PUBLIC_IP=51.xx.xx.xx
VPS_DOMAIN=vpn.yourdomain.com

# Admin
ADMIN_USERNAME=admin
ADMIN_PASSWORD=your_strong_password_here
SECRET_KEY=your_random_64_char_string_here

# IKEv2
IKEV2_SERVER_ID=vpn.yourdomain.com
IKEV2_POOL_SUBNET=10.0.0.0/24
IKEV2_DNS=1.1.1.1,8.8.8.8

# 3proxy
PROXY_HTTP_PORT=3128
PROXY_SOCKS_PORT=1080

# Telegram
TELEGRAM_BOT_TOKEN=123456:ABC-DEF...
ADMIN_TELEGRAM_ID=123456789

# Database
DATABASE_URL=sqlite:///data/proxygate.db
```

---

## 10. CRON-–ó–ê–î–ê–ß–ò

```python
# cron_tasks.py

# –ö–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç: –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–ø–ª–∞—Ç—ã
# */15 * * * * /opt/proxygate/venv/bin/python scripts/cron_tasks.py check_payments

# –ö–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç: –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ DNS ‚Üí IP –º–∞—Ä—à—Ä—É—Ç—ã
# */30 * * * * /opt/proxygate/venv/bin/python scripts/cron_tasks.py resolve_domains

# –†–∞–∑ –≤ –¥–µ–Ω—å 3:00: –±—ç–∫–∞–ø –ë–î
# 0 3 * * * /opt/proxygate/venv/bin/python scripts/cron_tasks.py backup

# –†–∞–∑ –≤ –¥–µ–Ω—å: –æ—á–∏—Å—Ç–∫–∞ –ª–æ–≥–æ–≤ 3proxy —Å—Ç–∞—Ä—à–µ 30 –¥–Ω–µ–π
# 0 4 * * * find /var/log/3proxy/ -name "*.log" -mtime +30 -delete
```

---

## 11. –ü–û–†–Ø–î–û–ö –†–ï–ê–õ–ò–ó–ê–¶–ò–ò (–¥–ª—è Claude Code)

### –§–∞–∑–∞ 1: Backend Core
1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å FastAPI –ø—Ä–æ–µ–∫—Ç (`backend/`)
2. config.py ‚Äî Pydantic Settings –∏–∑ .env
3. database.py ‚Äî SQLAlchemy async engine + session
4. models/ ‚Äî –≤—Å–µ 8 –º–æ–¥–µ–ª–µ–π (–≤–∫–ª—é—á–∞—è DomainRequest)
5. Alembic init + –Ω–∞—á–∞–ª—å–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è
6. schemas/ ‚Äî Pydantic schemas –¥–ª—è –≤—Å–µ—Ö –º–æ–¥–µ–ª–µ–π (–≤–∫–ª—é—á–∞—è portal.py)
7. utils/security.py ‚Äî JWT (–¥–≤–∞ —Ç–∏–ø–∞: admin + client), —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π
8. api/auth.py ‚Äî admin login, refresh, middleware
9. scripts/init_db.py ‚Äî —Å–æ–∑–¥–∞—Ç—å admin user + seed domain templates
10. api/clients.py ‚Äî –ø–æ–ª–Ω—ã–π CRUD (—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π portal_password)
11. api/domains.py ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ–º–µ–Ω–∞–º–∏ –∫–ª–∏–µ–Ω—Ç–∞
12. api/templates.py ‚Äî CRUD —à–∞–±–ª–æ–Ω–æ–≤
13. api/payments.py ‚Äî CRUD –ø–ª–∞—Ç–µ–∂–µ–π
14. api/dashboard.py ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–≤–∫–ª—é—á–∞—è pending domain_requests)

### –§–∞–∑–∞ 2: VPN & Proxy –°–µ—Ä–≤–∏—Å—ã
15. services/ikev2_manager.py ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è swanctl –∫–æ–Ω—Ñ–∏–≥–æ–≤, reload, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
16. services/domain_resolver.py ‚Äî —Ä–µ–∑–æ–ª–≤–∏–Ω–≥ –¥–æ–º–µ–Ω–æ–≤ ‚Üí CIDR
17. services/route_manager.py ‚Äî –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤
18. services/proxy_manager.py ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è 3proxy –∫–æ–Ω—Ñ–∏–≥–æ–≤, reload
19. services/pac_generator.py ‚Äî PAC-—Ñ–∞–π–ª—ã
20. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è: –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏/–∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞ ‚Üí –æ–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ –∫–æ–Ω—Ñ–∏–≥–∏

### –§–∞–∑–∞ 3: –ü—Ä–æ—Ñ–∏–ª–∏
21. services/profile_generator.py:
    - generate_windows_ps1() ‚Äî PowerShell —Å–∫—Ä–∏–ø—Ç —Å –º–∞—Ä—à—Ä—É—Ç–∞–º–∏
    - generate_ios_mobileconfig() ‚Äî XML plist —Å IKEv2 + routes
    - generate_macos_mobileconfig()
    - generate_android_sswan() ‚Äî JSON –¥–ª—è strongSwan App
22. api/profiles.py ‚Äî admin endpoints —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª–µ–π
23. –ü—É–±–ª–∏—á–Ω—ã–µ endpoints: /connect/{token}, /download/{token}/*

### –§–∞–∑–∞ 4: Client Portal API
24. api/portal_auth.py ‚Äî –ª–æ–≥–∏–Ω –∫–ª–∏–µ–Ω—Ç–∞ (username + password ‚Üí JWT type=client)
25. api/portal_profile.py ‚Äî —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–µ–π –∏–∑ –õ–ö (/api/portal/profiles/*)
26. api/portal_domains.py ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä –¥–æ–º–µ–Ω–æ–≤ + –∑–∞–ø—Ä–æ—Å –Ω–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ
27. api/portal_account.py ‚Äî /api/portal/me, —Å–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è, –∏—Å—Ç–æ—Ä–∏—è –ø–ª–∞—Ç–µ–∂–µ–π
28. api/admin: domain-requests endpoints (approve/reject)

### –§–∞–∑–∞ 5: Frontend ‚Äî Admin Panel
29. React + Vite + Tailwind –ø—Ä–æ–µ–∫—Ç (`frontend/`)
30. api.js ‚Äî fetch wrapper —Å –¥–≤—É–º—è —Ç–∏–ø–∞–º–∏ JWT (admin / client)
31. Admin Login page (`/admin/login`)
32. Admin Layout + Sidebar + routing
33. Dashboard page
34. Clients list page (—Ç–∞–±–ª–∏—Ü–∞ + —Ñ–∏–ª—å—Ç—Ä—ã)
35. Client detail page (4 —Ç–∞–±–∞)
36. Domain manager component
37. Payment history component
38. Domain Requests page (`/admin/domain-requests`)
39. Templates page
40. Settings page

### –§–∞–∑–∞ 6: Frontend ‚Äî Client Portal
41. Portal Login page (`/my/login`)
42. Portal Layout (–ø—Ä–æ—Å—Ç–æ–π header + content)
43. Portal Home ‚Äî —Å—Ç–∞—Ç—É—Å –ø–æ–¥–ø–∏—Å–∫–∏ + –±—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (`/my/`)
44. Portal Devices ‚Äî –∫–∞—Ä—Ç–æ—á–∫–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ + —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–µ–π (`/my/devices`)
45. Portal Domains ‚Äî —Å–ø–∏—Å–æ–∫ —Å–∞–π—Ç–æ–≤ + –∑–∞–ø—Ä–æ—Å –Ω–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ (`/my/domains`)
46. Portal Payments ‚Äî read-only –∏—Å—Ç–æ—Ä–∏—è –ø–ª–∞—Ç–µ–∂–µ–π (`/my/payments`)
47. Portal Settings ‚Äî —Å–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è (`/my/settings`)
48. –ü—É–±–ª–∏—á–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ /connect/{token} (HTML —Å –∫–Ω–æ–ø–∫–æ–π ¬´–í–æ–π—Ç–∏ –≤ –õ–ö¬ª)

### –§–∞–∑–∞ 7: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
49. services/payment_checker.py
50. scripts/cron_tasks.py ‚Äî check_payments, resolve_domains, backup
51. services/telegram_bot.py ‚Äî —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–≤–∫–ª—é—á–∞—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∑–∞–ø—Ä–æ—Å–∞—Ö –Ω–∞ –¥–æ–º–µ–Ω—ã)
52. Systemd timer / crontab

### –§–∞–∑–∞ 8: –î–µ–ø–ª–æ–π
53. scripts/setup_vps.sh
54. nginx/proxygate.conf
55. Systemd units –¥–ª—è backend
56. README.md ‚Äî –ø–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

---

## 12. –ó–ê–í–ò–°–ò–ú–û–°–¢–ò

### Backend (requirements.txt)
```
fastapi==0.115.0
uvicorn[standard]==0.32.0
sqlalchemy==2.0.36
alembic==1.14.0
aiosqlite==0.20.0
pydantic==2.10.0
pydantic-settings==2.6.0
python-jose[cryptography]==3.3.0
passlib[bcrypt]==1.7.4
python-multipart==0.0.17
aiofiles==24.1.0
httpx==0.28.0
dnspython==2.7.0
aiogram==3.14.0
jinja2==3.1.4
apscheduler==3.10.4
```

### Frontend (package.json dependencies)
```json
{
  "react": "^18.3.0",
  "react-dom": "^18.3.0",
  "react-router-dom": "^6.28.0",
  "lucide-react": "^0.460.0",
  "@tanstack/react-query": "^5.60.0"
}
```

---

## 13. –ö–õ–Æ–ß–ï–í–´–ï –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –ú–û–ú–ï–ù–¢–´

### –ü–æ—á–µ–º—É IKEv2 + EAP-MSCHAPv2
- Windows 10/11 –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∏–∑ –∫–æ—Ä–æ–±–∫–∏ (–ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí VPN ‚Üí –î–æ–±–∞–≤–∏—Ç—å)
- iOS/macOS ‚Äî .mobileconfig —Å IKEv2 payload (—É—Å—Ç–∞–Ω–æ–≤–∏–ª –∏ –∑–∞–±—ã–ª)
- –°–µ—Ä–≤–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Let's Encrypt —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç ‚Üí –∫–ª–∏–µ–Ω—Ç—ã –¥–æ–≤–µ—Ä—è—é—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –ù–µ –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –ù–ò–ö–ê–ö–û–ô –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Å–æ—Ñ—Ç –Ω–∞ Windows/iOS/macOS
- Android ‚Äî –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞, –≥–¥–µ –Ω—É–∂–µ–Ω strongSwan App (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π)

### Split Tunneling ‚Äî –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç
1. –ö–ª–∏–µ–Ω—Ç –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ VPN (IKEv2)
2. –í –∫–æ–Ω—Ñ–∏–≥–µ —É–∫–∞–∑–∞–Ω—ã –ö–û–ù–ö–†–ï–¢–ù–´–ï –º–∞—Ä—à—Ä—É—Ç—ã (CIDR-–±–ª–æ–∫–∏)
3. –¢–æ–ª—å–∫–æ —Ç—Ä–∞—Ñ–∏–∫ –∫ —ç—Ç–∏–º IP –∏–¥—ë—Ç —á–µ—Ä–µ–∑ VPN-—Ç—É–Ω–Ω–µ–ª—å
4. –í–µ—Å—å –æ—Å—Ç–∞–ª—å–Ω–æ–π —Ç—Ä–∞—Ñ–∏–∫ ‚Äî –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –∫–ª–∏–µ–Ω—Ç–∞
5. –ü—Ä–∏–º–µ—Ä: openai.com (104.18.x.x) ‚Üí —á–µ—Ä–µ–∑ VPN, yandex.ru ‚Üí –Ω–∞–ø—Ä—è–º—É—é

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–æ–º–µ–Ω–æ–≤
1. –ê–¥–º–∏–Ω –¥–æ–±–∞–≤–ª—è–µ—Ç/—É–¥–∞–ª—è–µ—Ç –¥–æ–º–µ–Ω—ã –∫–ª–∏–µ–Ω—Ç–∞
2. Backend —Ä–µ–∑–æ–ª–≤–∏—Ç –¥–æ–º–µ–Ω—ã ‚Üí CIDR
3. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ vpn_configs.resolved_routes
4. –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º —Å–∫–∞—á–∏–≤–∞–Ω–∏–∏ –ø—Ä–æ—Ñ–∏–ª—è ‚Äî –∫–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã
5. –î–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –∫–ª–∏–µ–Ω—Ç—É –Ω—É–∂–Ω–æ –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
   (–∏–ª–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å PowerShell —Å–∫—Ä–∏–ø—Ç –Ω–∞ Windows)

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å strongSwan
- Let's Encrypt —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (–∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ certbot)
- EAP-MSCHAPv2 –≤–Ω—É—Ç—Ä–∏ IKEv2 (–ø–∞—Ä–æ–ª—å –∑–∞—â–∏—â—ë–Ω TLS-—Ç—É–Ω–Ω–µ–ª–µ–º)
- AES-256 —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ
- Perfect Forward Secrecy (PFS)
- DPD (Dead Peer Detection) –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è —Ä–∞–∑—Ä—ã–≤–æ–≤
- unique = replace ‚Äî –Ω–æ–≤–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤—ã—Ç–µ—Å–Ω—è–µ—Ç —Å—Ç–∞—Ä–æ–µ (–æ–¥–∏–Ω –∫–ª–∏–µ–Ω—Ç = –æ–¥–Ω–∞ —Å–µ—Å—Å–∏—è)

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–æ–º–µ–Ω–æ–≤ –∫–ª–∏–µ–Ω—Ç–∞
- VPN-–º–∞—Ä—à—Ä—É—Ç—ã ¬´–≤—à–∏–≤–∞—é—Ç—Å—è¬ª –≤ –∫–æ–Ω—Ñ–∏–≥ –∫–ª–∏–µ–Ω—Ç–∞ (PowerShell/.mobileconfig)
- –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–ø–∏—Å–∫–∞ –¥–æ–º–µ–Ω–æ–≤ ‚Üí –Ω—É–∂–Ω–æ –∑–∞–Ω–æ–≤–æ —Å–∫–∞—á–∞—Ç—å/–∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥
- Proxy (PAC-—Ñ–∞–π–ª) –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –Ω–∞ –ª–µ—Ç—É ‚Äî –∫–ª–∏–µ–Ω—Ç—É –Ω–∏—á–µ–≥–æ –¥–µ–ª–∞—Ç—å –Ω–µ –Ω—É–∂–Ω–æ
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞–º: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å VPN + PAC –≤ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏
